{"version":3,"sources":["Header.jsx","hooks/useWebsocket.js","hooks/useCharacter.js","theme.js","utils/If.jsx","utils/getNumericValue.js","Form/AddButton.jsx","utils/getNumericPrefix.js","Form/NumericInput.jsx","Form/FormItem.jsx","Form/SaveableInput.jsx","Form/HorizontalInput.jsx","Form/EditButton.jsx","utils/validate.js","utils/Confirm.jsx","Form/DeleteButton.jsx","Form/index.jsx","Form/EditContainer.jsx","Displays/Badge.jsx","Form/Markdown.jsx","hooks/useNotes.jsx","Displays/Section.jsx","Displays/Simple.jsx","utils/constants.js","utils/getTotalModifier.js","CharacterSheet/ArmorClass/ViewArmorClass.jsx","CharacterSheet/ArmorClass/armorClassForm.js","CharacterSheet/ArmorClass/EditArmorClass.jsx","CharacterSheet/ArmorClass/index.jsx","utils/removeByIndex.js","utils/replaceByIndex.js","utils/Rotate.jsx","CharacterSheet/Attacks/attackForm.js","Form/Radio.jsx","CharacterSheet/AdvancedTextSection/ViewAdvancedTextSection.jsx","CharacterSheet/Attacks/ViewAttack.jsx","CharacterSheet/Attacks/EditAttack.jsx","CharacterSheet/Attacks/Attack.jsx","CharacterSheet/Attacks/index.jsx","CharacterSheet/Attributes/attributeForm.js","CharacterSheet/Attributes/ViewAttribute.jsx","CharacterSheet/Attributes/EditAttribute.jsx","CharacterSheet/Attributes/Attribute.jsx","CharacterSheet/Attributes/index.jsx","CharacterSheet/DeathSaves.jsx","CharacterSheet/AdvancedTextSection/advancedTextSectionForm.js","CharacterSheet/AdvancedTextSection/EditAdvancedTextSection.jsx","CharacterSheet/AdvancedTextSection/index.jsx","CharacterSheet/Equipment/Currency.jsx","CharacterSheet/Equipment/index.jsx","CharacterSheet/Features/index.jsx","CharacterSheet/Health/HealthHistory.jsx","CharacterSheet/Health/UpdateHealth.jsx","CharacterSheet/Health/index.js","CharacterSheet/Initiative/ViewInitiative.jsx","CharacterSheet/Initiative/initiativeForm.js","CharacterSheet/Initiative/EditInitiative.jsx","CharacterSheet/Initiative/index.jsx","CharacterSheet/Proficiencies/ViewProficiency.jsx","CharacterSheet/Proficiencies/proficiencyForm.js","CharacterSheet/Proficiencies/EditProficiency.jsx","CharacterSheet/Proficiencies/Proficiency.jsx","CharacterSheet/Proficiencies/index.jsx","CharacterSheet/Speed/ViewSpeed.jsx","CharacterSheet/Speed/speedForm.js","CharacterSheet/Speed/EditSpeed.jsx","CharacterSheet/Speed/index.jsx","Form/MarkdownInput.jsx","CharacterSheet/TextSection.jsx","CharacterSheet/index.jsx","hooks/useGameBoard.js","CharacterIcon.jsx","GameBoard.jsx","PlayerList.jsx","App.jsx","index.js"],"names":["withStyles","theme","title","padding","spacing","classes","AppBar","Typography","className","useWebsocket","url","ws","useMemo","WebSocket","useState","readyState","setReadyState","message","setMessage","useEffect","onopen","onclose","onerror","onmessage","e","data","close","send","msg","undefined","useCharacter","id","window","location","host","character","setCharacter","loading","JSON","parse","attributes","action","stringify","type","payload","createMuiTheme","palette","secondary","main","primary","dark","common","black","white","background","paper","overrides","MuiTableCell","root","borderBottomColor","head","fontWeight","If","children","conditions","timeout","component","collapsedHeight","visible","Boolean","_filter","length","in","defaultProps","enter","transitions","duration","standard","exit","getNumericValue","text","defaultValue","firstChar","removeableFirstChar","removeFirstChar","textToParse","substring","value","parseInt","_isNaN","AddButton","BoxProps","onAdd","props","bgcolor","border","borderRadius","borderColor","color","mx","width","fullWidth","onClick","getNumericPrefix","number","NumericInput","inputRef","onChange","useNumericPrefix","prefix","numericPrefix","prefixToShow","getInputRef","isNumericString","onValueChange","target","thousandSeparator","FormItem","disabled","error","helperText","inputProps","InputProps","label","onEnter","options","required","setValue","variant","onKeyDown","evt","keyCode","inputPropsForAll","_omit","titleComp","control","checked","container","_map","opt","key","item","xs","indexOf","_xor","select","option","inputComponent","multiline","numOfUses","Array","fill","map","use","i","err","updateUses","addButtonDisabled","_last","name","mod","wrap","alignItems","style","active","v","j","join","replace","split","_trimStart","renderInput","_noop","useStyles","makeStyles","save","cursor","SaveableInput","savingIndicator","onSave","saveOnBlur","newVal","setNewVal","saving","setSaving","valueChanged","String","endAdornment","position","onBlur","size","input","display","justifyContent","height","textAlign","HorizontalInput","inputFirst","labelProps","borderLeft","borderRight","order","p","px","align","editButton","top","right","minHeight","zIndex","editIcon","fontSize","EditButton","hovering","setHovering","onMouseEnter","onMouseLeave","validate","schema","validatedSchema","accessor","_isNil","hasError","_find","Confirm","Component","onConfirm","open","setOpen","onClose","DeleteButton","Form","form","updateValue","sm","md","lg","formProps","_startCase","newValue","EditContainer","onCancel","onDelete","Preview","validatedForm","setValidatedForm","previewing","setPreviewing","deleting","setDeleting","content","saveDisabled","_isEqual","overlay","bottom","left","borderBottom","alert","borderTop","transition","backgroundColor","light","marginLeft","Badge","rest","Markdown","defaultText","renderers","heading","level","paragraph","link","href","table","tableHead","tableBody","tableRow","hover","tableCell","isHeader","source","maxWidth","overflow","textOverflow","useNotes","notes","element","setElement","ref","useRef","notesComponent","popover","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","current","hasNotes","Section","openNotes","Simple","mt","modifiers","getTotalModifier","proficient","bonusModifier","proficiencyBonus","parsedBonus","bonuses","abbv","attrBonusModifier","attrModifier","parsedAttrBonusModifier","console","ViewArmorClass","ac","totalAc","base","maxAttrMod","attrModifiers","_reduce","res","attr","calculateAc","armorClassForm","EditArmorClass","ArmorClass","updateCharacter","editMode","setEditMode","removeByIndex","arr","index","replaceByIndex","toInsert","transitionDuration","transform","deg","Rotate","attackForm","checkbox","Radio","icon","checkedIcon","expandButton","expandWrapper","marginRight","ViewAdvancedTextSection","tags","longDesc","shortDesc","uses","expanded","setExpanded","val","totalUsed","totalUnused","newUsed","_fill","newUnused","my","tag","getHit","atk","modType","modifier","dc","_toUpper","getSave","ViewAttack","attack","dmg","dmgType","range","atkName","getName","atkRange","hit","damage","getDamage","newUses","EditAttack","Attack","useTabsStyles","margin","marginBottom","indicator","useTabStyles","marginTop","selected","createNewAttack","category","Attacks","attacks","newAttacks","setNewAttacks","newTab","setNewTab","tabsClasses","tabClasses","categories","cats","_uniq","tab","setTab","addDisabled","_","cat","categoryOfDeletedItem","numberOfItemsInCategory","updatedAttacks","newAttack","attributeForm","button","ViewAttribute","attribute","attrIndex","_findIndex","charWithUpdatedAttribute","_cloneDeep","renderedName","pb","wrapper","EditAttribute","Attribute","Attributes","attributeIndex","updatedAttribute","updatedAttributes","DeathSaves","health","_get","deathSaves","numberOfSuccesses","numberOfFailures","newDeathSaves","getNewDeathSaves","isSuccess","total","newSaves","oldSaves","ds","handleSuccess","handleFailure","mb","advancedTextSectionForm","EditAdvancedTextSection","AdvancedTextSection","Currency","money","toUpperCase","NEW_EQUIPMENT_TEMPLATE","Equipment","equipment","newEquipment","setNewEquipment","ml","pl","equip","updatedEquipment","newItem","updatedItem","NEW_FEATURES_TEMPLATE","Features","features","newFeatures","setNewFeatures","feature","updatedFeatures","positive","success","negative","HealthHistory","history","startHealth","num","newTotal","Fragment","UpdateHealth","updateCurrentHP","updateHealthHistory","hp","newHistory","setNewHistory","isNaN","getChangeType","parsedVal","getModifier","flexDirection","flexGrow","currentHp","rightSide","flexWrap","Health","v4","setHeight","healthHistory","setHealthHistory","document","getElementById","offsetHeight","historyWrapper","newHp","ViewInitiative","initiative","totalInitiative","calculateInitiative","EditInitiative","initiativeForm","Initiative","ViewProficiency","proficiency","displayName","ReactNumberFormat","proficiencyForm","EditProficiency","Proficiency","Proficiencies","fixedList","proficiencies","setProficiencies","updatedProficiencies","updatedProficiency","ViewSpeed","speed","totalSpeed","calculateSpeed","speedForm","EditSpeed","Speed","MarkdownInput","TextSection","useCallback","CharacterSheet","race","alignment","xp","inspiration","languagesAndProficiencies","maxHp","tempHp","totalHitDice","hitDice","personality","SET_SIZE","SET_OFFSET","SET_SCALE","initialState","offset","characters","scale","reducer","state","updatedCharacters","x","y","charToMoveIndex","updatedChar","useGameBoard","useReducer","dispatch","board","topOffset","leftOffset","xOffset","yOffset","setTop","setLeft","activeTouch","stopMoving","clientX","clientY","removeEventListener","move","curY","curX","newY","Math","round","newX","moveTouch","preventDefault","changedTouches","touch","identifier","stopMovingTouch","onMouseDown","stopPropagation","addEventListener","onTouchStart","passive","canvas","boardWrapper","gameBoard","querySelector","resize","outerWidth","outerHeight","moveBoard","start","startX","startY","moveBoardTouch","canvasClass","ctx","getContext","clearRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","numOfHorizontalLines","ceil","numOfVerticalLines","xGridOffset","yGridOffset","_times","drawGrid","getBoundingClientRect","PlayerList","newPlayer","setNewPlayer","addCharacter","toon","removeCharacter","Paper","List","ListItem","ListItemText","IconButton","TextField","ListItemSecondaryAction","App","Box","Grid","ReactDOM","render"],"mappings":"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","file":"static/js/main.90c7ec2d.chunk.js","sourcesContent":["import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst styles = theme => ({\r\n\ttitle: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n})\r\n\r\nfunction Header({ classes }) {\r\n  return (\r\n    <AppBar>\r\n      <Typography className={classes.title}>\r\n      \tDungeons &amp; Dragons\r\n      </Typography>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default withStyles(styles)(Header);\r\n","import { useEffect, useMemo, useState } from 'react';\r\n\r\nfunction useWebsocket(url) {\r\n  const ws = useMemo(() => new WebSocket(url), [url]);\r\n  const [readyState, setReadyState] = useState(ws.readyState);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    ws.onopen = () => {\r\n      setReadyState(ws.readyState);\r\n    }\r\n\r\n    ws.onclose = () => {\r\n      setReadyState(ws.readyState);\r\n    }\r\n\r\n    ws.onerror = () => {\r\n      setReadyState(ws.readyState);\r\n    }\r\n\r\n    ws.onmessage = (e) => {\r\n      setMessage(e.data);\r\n    }\r\n\r\n    return () => {\r\n      ws.close();\r\n    }\r\n  }, [ws]);\r\n\r\n  function send(msg) {\r\n    if (msg === null || msg === undefined) {\r\n      return;\r\n    }\r\n\r\n    ws.send(msg);\r\n  }\r\n\r\n  return {\r\n    readyState,\r\n    message,\r\n    send,\r\n    ws,\r\n  }\r\n}\r\n\r\nexport default useWebsocket;\r\n","import { useEffect, useState } from 'react';\r\nimport useWebsocket from './useWebsocket';\r\n\r\nfunction useCharacter(id) {\r\n  const url = `ws://${window.location.host}/character/${id}`;\r\n  const { message, readyState, send } = useWebsocket(url);\r\n  const [character, setCharacter] = useState({});\r\n  const loading = readyState === 0;\r\n\r\n  useEffect(() => {\r\n    if (message) {\r\n      setCharacter(JSON.parse(message));\r\n    }\r\n  }, [message])\r\n\r\n  function updateCharacter(attributes) {\r\n    const type = 'UPDATE';\r\n    const action = JSON.stringify({ type, payload: { ...character, ...attributes } });\r\n    \r\n    send(action);\r\n  }\r\n\r\n  return [\r\n    character,\r\n    updateCharacter,\r\n    loading,\r\n  ];\r\n}\r\n\r\nexport default useCharacter\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// #FFFEBD -- white\r\n// #F7CE65 -- secondary\r\n// #930C10 -- primary\r\n// #290000 -- primary__dark\r\n// #030303 -- black\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tsecondary: { main: '#F7CE65'},\r\n\t\tprimary: {\r\n\t\t\tmain: '#931c10',\r\n\t\t\tdark: '#290000',\r\n\t\t},\r\n\t\tcommon: {\r\n\t\t\tblack: '#030303',\r\n\t\t\twhite: '#FFFEBD',\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\tpaper: '#FFFEBD',\r\n\t\t}\r\n\t},\r\n\toverrides: {\r\n\t\tMuiTableCell: {\r\n\t\t\troot: {\r\n\t\t\t\tborderBottomColor: 'rgba(0, 0, 0, 0.42)',\r\n\t\t\t},\r\n\t\t\thead: {\r\n\t\t\t\tfontWeight: 700,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport default theme;","import React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Collapse } from '@material-ui/core';\r\nimport _filter from 'lodash/filter';\r\nimport theme from '../theme';\r\n\r\nfunction If({\r\n  children,\r\n  conditions,\r\n  timeout,\r\n  component,\r\n  collapsedHeight,\r\n}) {\r\n  const visible = useMemo(() => Boolean(_filter(conditions, Boolean).length), [conditions]);\r\n\r\n  return (\r\n    <Collapse\r\n      in={visible}\r\n      timeout={timeout}\r\n      component={component}\r\n      collapsedHeight={collapsedHeight}\r\n    >\r\n      {children}\r\n    </Collapse>\r\n  );\r\n}\r\n\r\nIf.propTypes = {\r\n  children: PropTypes.node,\r\n  conditions: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n  timeout: PropTypes.shape(),\r\n  component: PropTypes.elementType,\r\n  collapsedHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n};\r\n\r\nIf.defaultProps = {\r\n  children: null,\r\n  timeout: {\r\n    enter: theme.transitions.duration.standard,\r\n    exit: theme.transitions.duration.standard,\r\n  },\r\n  component: 'div',\r\n  collapsedHeight: 0,\r\n};\r\n\r\nexport default If;\r\n","import _isNaN from 'lodash/isNaN';\r\n\r\nfunction getNumericValue(text, defaultValue = 0) {\r\n  const firstChar = text[0];\r\n  const removeableFirstChar = firstChar === '0' || firstChar === '+';\r\n  const removeFirstChar = removeableFirstChar && text.length > 1;\r\n  const textToParse = removeFirstChar  ? text.substring(1) : text;\r\n  \r\n  if (textToParse === '-' || textToParse === '+') {\r\n    return textToParse;\r\n  }\r\n\r\n  const value = parseInt(text, 10);\r\n\r\n  return _isNaN(value) ? defaultValue : value;\r\n}\r\n\r\nexport default getNumericValue;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Button,\r\n} from '@material-ui/core';\r\nimport {\r\n  Add as AddIcon,\r\n} from '@material-ui/icons';\r\n\r\nfunction AddButton({\r\n  BoxProps,\r\n  onAdd,\r\n  ...props\r\n}) {\r\n  return (\r\n    <Box\r\n      bgcolor=\"background.paper\"\r\n      border={1}\r\n      borderRadius={4}\r\n      borderColor=\"rgba(0, 0, 0, .42)\"\r\n      color=\"grey.500\"\r\n      mx=\"auto\"\r\n      width=\"25%\"\r\n      {...BoxProps}\r\n    >\r\n      <Button fullWidth onClick={onAdd} {...props}>\r\n        <AddIcon />\r\n      </Button>\r\n    </Box>\r\n  )\r\n}\r\n\r\nAddButton.propTypes = {\r\n  BoxProps: PropTypes.shape(),\r\n  onAdd: PropTypes.func.isRequired,\r\n};\r\n\r\nAddButton.defaultProps = {\r\n  BoxProps: {},\r\n};\r\n\r\nexport default AddButton;\r\n","function getNumericPrefix(number) {\r\n  return number > -1 ? '+' : '';\r\n}\r\n\r\nexport default getNumericPrefix;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport NumberFormater from 'react-number-format';\r\nimport getNumericValue from '../utils/getNumericValue';\r\nimport getNumericPrefix from '../utils/getNumericPrefix';\r\n\r\nfunction NumericInput({\r\n  inputRef,\r\n  onChange,\r\n  useNumericPrefix,\r\n  prefix,\r\n  value,\r\n  ...props\r\n}) {\r\n  const numericPrefix = useNumericPrefix ? getNumericPrefix(value) : '';\r\n  const prefixToShow = prefix || numericPrefix;\r\n\r\n  return (\r\n    <NumberFormater\r\n      {...props}\r\n      getInputRef={inputRef}\r\n      isNumericString\r\n      onValueChange={({ value }) => {onChange({ target: { value: getNumericValue(value) } })}}\r\n      thousandSeparator\r\n      value={value}\r\n      prefix={prefixToShow}\r\n    />\r\n  )\r\n}\r\n\r\nNumericInput.propTypes = {\r\n  inputRef: PropTypes.func.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  useNumericPrefix: PropTypes.bool,\r\n};\r\n\r\nNumericInput.defaultProps = {\r\n  useNumericPrefix: false,\r\n}\r\n\r\nexport default NumericInput;\r\n","import React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Checkbox,\r\n  Divider,\r\n  FormControlLabel,\r\n  Grid,\r\n  IconButton,\r\n  MenuItem,\r\n  TextField,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport _filter from 'lodash/filter';\r\nimport _last from 'lodash/last';\r\nimport _map from 'lodash/map';\r\nimport _noop from 'lodash/noop';\r\nimport _omit from 'lodash/omit';\r\nimport _trimStart from 'lodash/trimStart';\r\nimport _xor from 'lodash/xor';\r\nimport If from '../utils/If';\r\nimport getNumericValue from '../utils/getNumericValue';\r\nimport AddButton from './AddButton';\r\nimport NumericInput from './NumericInput';\r\n\r\nfunction updateTags(tagsText) {\r\n  return tagsText\r\n    .replace(', ', ',')\r\n    .split(',')\r\n    .map(_trimStart);\r\n}\r\n\r\nfunction FormItem({\r\n  disabled,\r\n  error,\r\n  helperText,\r\n  fullWidth,\r\n  inputProps,\r\n  InputProps,\r\n  label,\r\n  onEnter,\r\n  options,\r\n  required,\r\n  text,\r\n  title,\r\n  type,\r\n  setValue,\r\n  value,\r\n  variant,\r\n  ...props\r\n}) {\r\n  function handleEnter(evt) {\r\n    if (evt.keyCode === 13) {\r\n      onEnter();\r\n    }\r\n  }\r\n\r\n  const defaultProps = {\r\n    disabled,\r\n    error,\r\n    fullWidth,\r\n    helperText,\r\n    InputProps,\r\n    label,\r\n    required,\r\n    variant,\r\n    value,\r\n    onKeyDown: handleEnter,\r\n  };\r\n  const inputPropsForAll = _omit(inputProps, ['useNumericPrefix', 'prefix']);\r\n  const titleComp = useMemo(() => (\r\n    <If conditions={[Boolean(title)]}>\r\n      <Typography variant=\"h6\">{title}</Typography>\r\n    </If>\r\n  ), [title]);\r\n\r\n\r\n  function renderInput() {\r\n    switch (type) {\r\n      case 'divider': {\r\n        return <Divider />\r\n      }\r\n      case 'static-text': {\r\n        return <Typography variant={variant}>{text}</Typography>\r\n      }\r\n      case 'checkbox': {\r\n        return (\r\n          <FormControlLabel\r\n            control={(\r\n              <Checkbox\r\n                checked={value}\r\n                onChange={() => setValue(!value)}\r\n                disabled={disabled}\r\n                required={required}\r\n              />\r\n            )}\r\n            label={label}\r\n          />\r\n        );\r\n      }\r\n      case 'checkbox-select': {\r\n        return (\r\n          <Grid container>\r\n            {_map(options, (opt) => (\r\n              <Grid key={opt.value} item xs={12}>\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      checked={value.indexOf(opt.value) > -1}\r\n                      onChange={() => setValue(_xor(value, [opt.value]))}\r\n                      disabled={disabled}\r\n                      required={required}\r\n                    />\r\n                  )}\r\n                  label={opt.label}\r\n                />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        );\r\n      }\r\n      case 'select': {\r\n        return (\r\n          <TextField\r\n            {...defaultProps}\r\n            {...props}\r\n            onChange={(evt) => setValue(evt.target.value)}\r\n            select\r\n          >\r\n            {_map(options, (option) => (\r\n              <MenuItem\r\n                key={option.value}\r\n                value={option.value}\r\n              >\r\n                {option.label || option.value}\r\n              </MenuItem>\r\n            ))}\r\n          </TextField>\r\n        );\r\n      }\r\n      case 'number': {\r\n        return (\r\n          <TextField\r\n            {...defaultProps}\r\n            {...props}\r\n            onChange={(evt) => setValue(evt.target.value)}\r\n            InputProps={{\r\n              inputComponent: NumericInput,\r\n              ...InputProps,\r\n            }}\r\n            inputProps={inputProps}\r\n          />\r\n        );\r\n      }\r\n      case 'multiline': {\r\n        return (\r\n          <TextField\r\n            {...defaultProps}\r\n            {...props}\r\n            multiline\r\n            onChange={(evt) => setValue(evt.target.value)}\r\n          />\r\n        );\r\n      }\r\n      case 'uses': {\r\n        function updateUses(numOfUses) {\r\n          try {\r\n            return Array(numOfUses).fill(false).map((use, i) => value[i] || use);\r\n          } catch (err) {\r\n            return [];\r\n          }\r\n        }\r\n\r\n        return (\r\n          <TextField\r\n            {...defaultProps}\r\n            {...props}\r\n            inputProps={inputPropsForAll}\r\n            value={value.length}\r\n            onChange={(evt) => setValue(updateUses(getNumericValue(evt.target.value)))}\r\n          />\r\n        );\r\n      }\r\n      case 'modifiers': {\r\n        const addButtonDisabled = value.length\r\n          ? !_last(value).name\r\n          : false;\r\n\r\n        return (\r\n          <>\r\n            {_map(value, (mod, i) => (\r\n              <Grid container key={i} wrap=\"nowrap\" spacing={2} alignItems=\"center\">\r\n                <Grid item>\r\n                  <Checkbox\r\n                    style={{ padding: 0 }}\r\n                    checked={mod.active}\r\n                    onChange={() => setValue(_map(value, (v, j) => (i === j ? {...v, active: !mod.active} : v)))}\r\n                    disabled={disabled}\r\n                    required={required}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={2}>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={mod.value}\r\n                    onChange={(evt) => setValue(_map(value, (v, j) => (i === j ? {...v, value: getNumericValue(evt.target.value)} : v)))}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={10}>\r\n                  <TextField\r\n                    fullWidth\r\n                    value={mod.name}\r\n                    onChange={(evt) => setValue(_map(value, (v, j) => (i === j ? {...v, name: evt.target.value} : v)))}\r\n                  />\r\n                </Grid>\r\n                <Grid item>\r\n                  <IconButton onClick={() => setValue(_filter(value, (v, j) => j !== i))}>\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </Grid>\r\n              </Grid>\r\n            ))}\r\n            <AddButton\r\n              disabled={addButtonDisabled}\r\n              onAdd={() => setValue([...value, { active: false, name: '', value: 0 }])}\r\n            />\r\n          </>\r\n        )\r\n      }\r\n      case 'list': {\r\n        return (\r\n          <TextField\r\n            {...defaultProps}\r\n            {...props}\r\n            inputProps={inputPropsForAll}\r\n            value={value.join(', ')}\r\n            onChange={(evt) => setValue(updateTags(evt.target.value))}\r\n          />\r\n        );\r\n      }\r\n      default: {\r\n        return (\r\n          <TextField\r\n            {...defaultProps}\r\n            {...props}\r\n            inputProps={inputPropsForAll}\r\n            onChange={(evt) => setValue(evt.target.value)}\r\n          />\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {titleComp}\r\n      {renderInput()}\r\n    </>\r\n  )\r\n}\r\n\r\nFormItem.propTypes = {\r\n  disabled: PropTypes.bool,\r\n  error: PropTypes.bool,\r\n  fullWidth: PropTypes.bool,\r\n  helperText: PropTypes.string,\r\n  inputProps: PropTypes.shape(),\r\n  InputProps: PropTypes.shape(),\r\n  label: PropTypes.string,\r\n  onEnter: PropTypes.func,\r\n  options: PropTypes.arrayOf(PropTypes.shape({\r\n    label: PropTypes.string,\r\n    value: PropTypes.string.isRequired,\r\n  })),\r\n  required: PropTypes.bool,\r\n  text: PropTypes.string,\r\n  title: PropTypes.string,\r\n  type: PropTypes.string,\r\n  setValue: PropTypes.func.isRequired,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.number,\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.arrayOf(PropTypes.oneOfType([\r\n      PropTypes.bool,\r\n      PropTypes.string,\r\n    ])),\r\n  ]),\r\n  variant: PropTypes.string,\r\n};\r\n\r\nFormItem.defaultProps = {\r\n  disabled: false,\r\n  error: false,\r\n  fullWidth: true,\r\n  helperText: '',\r\n  inputProps: {},\r\n  InputProps: {},\r\n  label: '',\r\n  onEnter: _noop,\r\n  options: [],\r\n  required: false,\r\n  text: '',\r\n  type: 'text',\r\n  title: '',\r\n  variant: 'filled',\r\n  value: '',\r\n}\r\n\r\nexport default FormItem;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  CircularProgress,\r\n  InputAdornment,\r\n} from '@material-ui/core';\r\nimport { Save as SaveIcon } from '@material-ui/icons';\r\nimport _noop from 'lodash/noop';\r\nimport FormItem from './FormItem';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  save: {\r\n    cursor: 'pointer',\r\n    color: theme.palette.primary.main,\r\n  },\r\n}));\r\n\r\nfunction SaveableInput({\r\n  label,\r\n  savingIndicator,\r\n  onSave,\r\n  saveOnBlur,\r\n  type,\r\n  value,\r\n  ...props\r\n}) {\r\n  const classes = useStyles();\r\n  const [newVal, setNewVal] = useState(value);\r\n  const [saving, setSaving] = useState(false);\r\n  const valueChanged = String(value) !== String(newVal);\r\n\r\n  useEffect(() => {\r\n    setSaving(false);\r\n    setNewVal(value);\r\n  }, [value])\r\n\r\n  function save() {\r\n    if (valueChanged) {\r\n      setSaving(true);\r\n      onSave(newVal);\r\n    }\r\n  }\r\n\r\n  function handleEnter(evt) {\r\n    if (evt.keyCode === 13) {\r\n      save();\r\n    }\r\n  }\r\n\r\n  function endAdornment() {\r\n    if (savingIndicator && saving) {\r\n      return <InputAdornment position=\"end\">{savingIndicator}</InputAdornment>\r\n    }\r\n\r\n    if (!saveOnBlur && valueChanged) {\r\n      return (\r\n        <InputAdornment\r\n          className={classes.save}\r\n          position=\"end\"\r\n          onClick={save}\r\n        >\r\n          <SaveIcon />\r\n        </InputAdornment>\r\n      )\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <FormItem\r\n      disabled={saving}\r\n      InputProps={{\r\n        endAdornment: endAdornment(),\r\n      }}\r\n      label={label}\r\n      setValue={setNewVal}\r\n      onBlur={saveOnBlur ? save : _noop}\r\n      onKeyDown={handleEnter}\r\n      type={type}\r\n      value={newVal}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nSaveableInput.propTypes = {\r\n  label: PropTypes.string,\r\n  onSave: PropTypes.func.isRequired,\r\n  saveOnBlur: PropTypes.bool,\r\n  savingIndicator: PropTypes.node,\r\n  type: PropTypes.string,\r\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n};\r\n\r\nSaveableInput.defaultProps = {\r\n  label: '',\r\n  type: 'text',\r\n  saveOnBlur: false,\r\n  savingIndicator: <CircularProgress size={16} />,\r\n};\r\n\r\nexport default SaveableInput;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _noop from 'lodash/noop';\r\nimport SaveableInput from './SaveableInput';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  input: {\r\n    background: 'rgba(0, 0, 0, 0.09)',\r\n    border: '1px solid rgba(0, 0, 0, 0.42)',\r\n    borderRadius: 4,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    padding: theme.spacing(.5),\r\n    height: theme.spacing(6),\r\n    width: theme.spacing(6),\r\n\r\n    '& > div:before': {\r\n      display: 'none',\r\n    },\r\n    '& > div:after': {\r\n      display: 'none',\r\n    },\r\n\r\n    '& input': {\r\n      padding: 0,\r\n      textAlign: 'center',\r\n    },\r\n  },\r\n}))\r\n\r\nfunction HorizontalInput({\r\n  label,\r\n  value,\r\n  type,\r\n  inputFirst,\r\n  onSave,\r\n  useNumericPrefix,\r\n  ...props\r\n}) {\r\n  const classes = useStyles();\r\n  const labelProps = inputFirst\r\n    ? { borderLeft: 0, borderRadius: '0 4px 4px 0' }\r\n    : { borderRight: 0, borderRadius: '4px 0 0 4px', order: -1 };\r\n\r\n  return (\r\n    <Grid container wrap=\"nowrap\" alignItems=\"center\">\r\n      <Grid item>\r\n        <SaveableInput\r\n          type={type}\r\n          value={value}\r\n          variant=\"standard\"\r\n          className={classes.input}\r\n          onSave={onSave}\r\n          saveOnBlur\r\n          savingIndicator=\"\"\r\n          inputProps={{\r\n            useNumericPrefix,\r\n          }}\r\n          {...props}\r\n        />\r\n      </Grid>\r\n      <Box\r\n        bgcolor=\"background.paper\"\r\n        border={1}\r\n        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n        p={0.25}\r\n        px={1}\r\n        width={1}\r\n        {...labelProps}\r\n      >\r\n        <Typography align=\"center\">{label}</Typography>\r\n      </Box>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nHorizontalInput.propTypes = {\r\n  inputFirst: PropTypes.bool,\r\n  useNumericPrefix: PropTypes.bool,\r\n  label: PropTypes.string.isRequired,\r\n  onSave: PropTypes.func,\r\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n  type: PropTypes.string,\r\n};\r\n\r\nHorizontalInput.defaultProps = {\r\n  inputFirst: true,\r\n  useNumericPrefix: true,\r\n  type: 'text',\r\n  onSave: _noop,\r\n};\r\n\r\nexport default HorizontalInput;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Fab,\r\n  Fade,\r\n} from '@material-ui/core';\r\nimport { Edit as EditIcon } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles(( theme ) => ({\r\n  editButton: {\r\n    position: 'absolute',\r\n    top: size => theme.spacing(size / -2),\r\n    right: size => theme.spacing(size / -2),\r\n    height: size => theme.spacing(size),\r\n    minHeight: 0,\r\n    width: size => theme.spacing(size),\r\n    zIndex: 100,\r\n  },\r\n  editIcon: {\r\n    fontSize: size => theme.spacing(size / 2),\r\n  },\r\n}));\r\n\r\nfunction EditButton({ children, size, ...props }) {\r\n  const classes = useStyles(size);\r\n  const [hovering, setHovering] = useState(false);\r\n\r\n  return (\r\n    <Box\r\n      position=\"relative\"\r\n      onMouseEnter={() => setHovering(true)}\r\n      onMouseLeave={() => setHovering(false)}\r\n    >\r\n      <Fade in={hovering}>\r\n        <Fab className={classes.editButton} color=\"primary\" {...props}>\r\n          <EditIcon className={classes.editIcon} />\r\n        </Fab>\r\n      </Fade>\r\n      {children}\r\n    </Box>\r\n  )\r\n}\r\n\r\nEditButton.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  size: PropTypes.number,\r\n};\r\n\r\nEditButton.defaultProps = {\r\n  size: 3,\r\n};\r\n\r\nexport default EditButton;\r\n","import _find from 'lodash/find';\r\nimport _isNaN from 'lodash/isNaN';\r\nimport _isNil from 'lodash/isNil';\r\nimport _map from 'lodash/map';\r\n\r\nfunction validate(schema, data) {\r\n  const validatedSchema = _map(schema, (item) => {\r\n    const { accessor, required, type } = item;\r\n    const value = data[accessor];\r\n\r\n    if (required && (_isNil(value) || value === '')) {\r\n      return { ...item, error: true };\r\n    }\r\n\r\n    if (type === 'number' && (typeof value !== 'number' || _isNaN(value))) {\r\n      return { ...item, error: true };\r\n    }\r\n\r\n    return { ...item, error: false };\r\n  });\r\n  const hasError = Boolean(_find(validatedSchema, [['error'], true]));\r\n\r\n  return { hasError, validatedSchema };\r\n}\r\n\r\nexport default validate;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from '@material-ui/core';\r\n\r\nfunction Confirm({\r\n  Component,\r\n  onConfirm,\r\n  text,\r\n  title,\r\n  ...props\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  function close() {\r\n    setOpen(false);\r\n  }\r\n\r\n  function confirm() {\r\n    close();\r\n    onConfirm();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Component {...props} onClick={() => setOpen(true)} />\r\n      <Dialog\r\n        open={open}\r\n        onClose={close}\r\n      >\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText component=\"div\">\r\n            {text}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={close}>Cancel</Button>\r\n          <Button color=\"primary\" onClick={confirm} variant=\"contained\">Confirm</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n\r\nConfirm.propTypes = {\r\n  Component: PropTypes.oneOfType([PropTypes.node, PropTypes.elementType]).isRequired,\r\n  text: PropTypes.node,\r\n  title: PropTypes.string,\r\n  onConfirm: PropTypes.func.isRequired,\r\n};\r\n\r\nConfirm.defaultProps = {\r\n  title: 'Are you sure?',\r\n  text: 'Are you sure you want to continue?',\r\n};\r\n\r\nexport default Confirm;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button } from '@material-ui/core';\r\nimport { Delete as DeleteIcon } from '@material-ui/icons';\r\nimport Confirm from '../utils/Confirm';\r\n\r\nfunction DeleteButton({\r\n  onClick,\r\n}) {\r\n  return (\r\n    <Confirm\r\n      Component={(props) => (<Button {...props}><DeleteIcon /></Button>)}\r\n      onConfirm={onClick}\r\n      text=\"Once deleted, it cannot be undone.\"\r\n      title=\"Delete this?\"\r\n    />\r\n  )\r\n}\r\n\r\nDeleteButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default DeleteButton;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport _isNil from 'lodash/isNil';\r\nimport _map from 'lodash/map';\r\nimport _startCase from 'lodash/startCase';\r\nimport FormItem from './FormItem';\r\n\r\nfunction Form({\r\n  form,\r\n  value,\r\n  setValue,\r\n}) {\r\n  function updateValue(newVal, accessor) {\r\n    setValue({ ...value, [accessor]: newVal });\r\n  }\r\n\r\n  return (\r\n    <Box p={2}>\r\n      <Grid container spacing={2}>\r\n        {_map(form, ({\r\n          label,\r\n          accessor,\r\n          defaultValue,\r\n          xs = 12,\r\n          sm,\r\n          md,\r\n          lg,\r\n          ...formProps\r\n        }) => (\r\n          <Grid\r\n            key={accessor}\r\n            item\r\n            xs={xs}\r\n            sm={sm}\r\n            md={md}\r\n            lg={lg}\r\n          >\r\n            <FormItem\r\n              label={label || _startCase(accessor)}\r\n              setValue={(newValue) => updateValue(newValue, accessor)}\r\n              value={_isNil(value[accessor]) ? defaultValue : value[accessor]}\r\n              {...formProps}\r\n            />\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\nForm.propTypes = {\r\n  form: PropTypes.arrayOf(PropTypes.shape()).isRequired,\r\n  value: PropTypes.shape().isRequired,\r\n  setValue: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Form;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Button,\r\n  ButtonGroup,\r\n  CircularProgress,\r\n} from '@material-ui/core';\r\nimport {\r\n  Cancel as CancelIcon,\r\n  Code as CodeIcon,\r\n  Help as InfoIcon,\r\n  Save as SaveIcon,\r\n  Refresh as RefreshIcon,\r\n  Visibility as VisibilityIcon,\r\n} from '@material-ui/icons';\r\nimport _isEqual from 'lodash/isEqual';\r\nimport _noop from 'lodash/noop';\r\nimport If from '../utils/If';\r\nimport validate from '../utils/validate';\r\nimport DeleteButton from './DeleteButton';\r\nimport Form from './index';\r\n\r\nfunction EditContainer({\r\n  bgcolor,\r\n  onCancel,\r\n  onDelete,\r\n  onSave,\r\n  Preview,\r\n  form,\r\n  value,\r\n  width,\r\n}) {\r\n  const [validatedForm, setValidatedForm] = useState(form);\r\n  const [newVal, setNewVal] = useState(value);\r\n  const [previewing, setPreviewing] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const content = useMemo(() => {\r\n    if (previewing) {\r\n      return <Preview newVal={newVal} />\r\n    }\r\n\r\n    return <Form form={validatedForm} setValue={setNewVal} value={newVal} />\r\n  }, [validatedForm, newVal, setNewVal, previewing]);\r\n  const saveDisabled = _isEqual(newVal, value);\r\n  const overlay = (saving || deleting)\r\n    ? <Box\r\n        bgcolor=\"rgba(0, 0, 0, .25)\"\r\n        position=\"absolute\"\r\n        top={0}\r\n        bottom={0}\r\n        left={0}\r\n        right={0}\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        zIndex={1}\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    : null;\r\n\r\n  useEffect(() => {\r\n    if (saving && saveDisabled) {\r\n      onCancel();\r\n    }\r\n  }, [onCancel, saving, saveDisabled]);\r\n\r\n  function save(newVal) {\r\n    const { hasError, validatedSchema } = validate(form, newVal);\r\n\r\n    if (hasError) {\r\n      setValidatedForm(validatedSchema);\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    onSave(newVal);\r\n  }\r\n\r\n  function handleDelete() {\r\n    setDeleting(true);\r\n    onDelete();\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      bgcolor={bgcolor}\r\n      border={1}\r\n      borderColor=\"grey.500\"\r\n      borderRadius={4}\r\n      position=\"relative\"\r\n      width={width}\r\n      zIndex={100}\r\n    >\r\n      {overlay}\r\n      <Box\r\n        bgcolor=\"grey.300\"\r\n        borderBottom={1}\r\n        borderColor=\"grey.500\"\r\n        borderRadius=\"4px 4px 0 0\"\r\n        display=\"flex\"\r\n        justifyContent=\"space-between\"\r\n      >\r\n        <ButtonGroup variant=\"text\">\r\n          <Button disabled={!previewing} onClick={() => setPreviewing(false)}>\r\n            <CodeIcon />\r\n          </Button>\r\n          <Button disabled={previewing} onClick={() => setPreviewing(true)}>\r\n            <VisibilityIcon />\r\n          </Button>\r\n          <Button onClick={() => alert('Learn how to write markdown here: https://www.google.com/search?client=firefox-b-1-d&q=how+to+write+markdown')}>\r\n            <InfoIcon />\r\n          </Button>\r\n        </ButtonGroup>\r\n\r\n        <ButtonGroup variant=\"text\">\r\n          <Button onClick={onCancel}>\r\n            <CancelIcon />\r\n          </Button>\r\n        </ButtonGroup>\r\n      </Box>\r\n\r\n      {content}\r\n\r\n      <Box\r\n        bgcolor=\"grey.300\"\r\n        borderTop={1}\r\n        borderColor=\"grey.500\"\r\n        borderRadius=\"0 0 4px 4px\"\r\n        display=\"flex\"\r\n        justifyContent=\"space-between\"\r\n      >\r\n        <ButtonGroup variant=\"text\">\r\n          <Button disabled={saveDisabled} onClick={() => setNewVal(value)}>\r\n            <RefreshIcon />\r\n          </Button>\r\n          <Button disabled={saveDisabled} onClick={() => save(newVal)}>\r\n            <SaveIcon />\r\n          </Button>\r\n        </ButtonGroup>\r\n\r\n        <ButtonGroup variant=\"text\">\r\n          <If conditions={[onDelete !== _noop]}>\r\n            <DeleteButton onClick={handleDelete}/>\r\n          </If>\r\n        </ButtonGroup>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n\r\nEditContainer.propTypes = {\r\n  bgcolor: PropTypes.string,\r\n  form: PropTypes.arrayOf(PropTypes.shape()).isRequired,\r\n  onCancel: PropTypes.func.isRequired,\r\n  onDelete: PropTypes.func,\r\n  onSave: PropTypes.func.isRequired,\r\n  Preview: PropTypes.oneOfType([PropTypes.elementType, PropTypes.node]).isRequired,\r\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.shape()]).isRequired,\r\n  width: PropTypes.number,\r\n};\r\n\r\nEditContainer.defaultProps = {\r\n  bgcolor: 'transparent',\r\n  onDelete: _noop,\r\n  width: 1,\r\n};\r\n\r\nexport default EditContainer;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Typography } from '@material-ui/core';\r\nimport _noop from 'lodash/noop';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    cursor: ({ onClick }) => (onClick === _noop ? 'default' : 'pointer'),\r\n    fontSize: '0.8rem',\r\n    transition: '0.2s all ease-in-out',\r\n\r\n    '&:hover': {\r\n      backgroundColor: ({ onClick }) => (\r\n        onClick === _noop\r\n          ? theme.palette.primary.main\r\n          : theme.palette.primary.light\r\n        ),\r\n    },\r\n\r\n    '& + $root': {\r\n      marginLeft: theme.spacing(0.5),\r\n    },\r\n  },\r\n}));\r\n\r\nfunction Badge(props) {\r\n  const {\r\n    onClick,\r\n    text,\r\n    ...rest\r\n  } = props;\r\n  const classes = useStyles(props);\r\n\r\n  return (\r\n    <Box\r\n      bgcolor=\"primary.main\"\r\n      border={1}\r\n      borderColor=\"primary.dark\"\r\n      borderRadius={4}\r\n      display=\"inline-block\"\r\n      className={classes.root}\r\n      component={Typography}\r\n      color=\"primary.contrastText\"\r\n      p={0.5}\r\n      {...rest}\r\n    >\r\n      {text}\r\n    </Box>\r\n  )\r\n}\r\n\r\nBadge.propTypes = {\r\n  onClick: PropTypes.func,\r\n  text: PropTypes.string.isRequired,\r\n};\r\n\r\nBadge.defaultProps = {\r\n  onClick: _noop,\r\n}\r\n\r\nexport default Badge;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport {\r\n  Link,\r\n  Table,\r\n  TableHead,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  Typography,\r\n} from '@material-ui/core';\r\n\r\nfunction Markdown({\r\n  defaultText,\r\n  text,\r\n  ...props\r\n}) {\r\n  return (\r\n    <ReactMarkdown\r\n      renderers={{\r\n        heading: ({ children, level }) => <Typography variant={`h${level}`}>{children}</Typography>,\r\n        paragraph: ({ children }) => <Typography>{children}</Typography>,\r\n        link: ({ children, href }) => <Link color=\"primary\" href={href} size=\"small\">{children}</Link>,\r\n        table: ({ children, ...props }) => <Table>{children}</Table>,\r\n        tableHead: ({ children, ...props }) => <TableHead>{children}</TableHead>,\r\n        tableBody: ({ children, ...props }) => <TableBody>{children}</TableBody>,\r\n        tableRow: ({ children, ...props }) => <TableRow hover>{children}</TableRow>,\r\n        tableCell: ({ children, isHeader, align, ...props }) => <TableCell align={align || 'inherit'} variant={isHeader ? 'head' : 'body'}>{children}</TableCell>,\r\n      }}\r\n      source={text || defaultText}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nMarkdown.propTypes = {\r\n  defaultText: PropTypes.string,\r\n  text: PropTypes.string,\r\n};\r\n\r\nMarkdown.defaultProps = {\r\n  defaultText: '',\r\n  text: '',\r\n};\r\n\r\nexport default Markdown;\r\n","import React, { useRef, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Popover,\r\n} from '@material-ui/core';\r\nimport Markdown from '../Form/Markdown';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    maxWidth: 600,\r\n    overflow: 'ellipsis',\r\n    textOverflow: 'ellipsis',\r\n\r\n  },\r\n}));\r\n\r\nfunction useNotes(notes) {\r\n  const [element, setElement] = useState(null);\r\n  const ref = useRef({});\r\n  const classes = useStyles();\r\n\r\n  function openNotes() {\r\n    setElement(ref.current);\r\n  }\r\n\r\n  const notesComponent = (\r\n    <Popover\r\n      className={classes.popover}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      open={Boolean(element)}\r\n      anchorEl={element}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'left',\r\n      }}\r\n      onClose={() => setElement(null)}\r\n    >\r\n      <Box p={1}>\r\n        <Markdown text={notes || 'No Notes'} />\r\n      </Box>\r\n    </Popover>\r\n  );\r\n\r\n  return [ref, openNotes, notesComponent]\r\n}\r\n\r\nexport default useNotes;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Typography } from '@material-ui/core';\r\nimport _noop from 'lodash/noop';\r\nimport useNotes from '../hooks/useNotes';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  title: {\r\n    cursor: hasNotes => (hasNotes ? 'pointer' : 'default'),\r\n\r\n    '&:hover': {\r\n      backgroundColor: hasNotes => (hasNotes ? 'rgba(0, 0, 0, 0.09)' : 'none'),\r\n    },\r\n  },\r\n}));\r\n\r\nfunction Section({\r\n  children,\r\n  hasNotes,\r\n  label,\r\n  notes,\r\n  ...props\r\n}) {\r\n  const classes = useStyles(hasNotes);\r\n  const [ref, openNotes, notesComponent] = useNotes(notes);\r\n\r\n  return (\r\n    <Box\r\n      border={1}\r\n      borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n      borderRadius={4}\r\n      bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n      ref={ref}\r\n      {...props}\r\n    >\r\n      <Box\r\n        bgcolor=\"background.paper\"\r\n        borderRadius=\"4px 4px 0 0\"\r\n      >\r\n        {children}\r\n      </Box>\r\n\r\n      <Box\r\n        className={classes.title}\r\n        onClick={hasNotes ? openNotes : _noop}\r\n        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n        borderTop={1}\r\n        p={2}\r\n      >\r\n        <Typography align=\"center\" variant=\"h6\">\r\n          {label}{notes ? '*' : ''}\r\n        </Typography>\r\n      </Box>\r\n      {notesComponent}\r\n    </Box>\r\n  )\r\n}\r\n\r\nSection.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  hasNotes: PropTypes.bool,\r\n  label: PropTypes.string.isRequired,\r\n  notes: PropTypes.string,\r\n};\r\n\r\nSection.defaultProps = {\r\n  notes: '',\r\n  hasNotes: true,\r\n}\r\n\r\nexport default Section;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Typography } from '@material-ui/core';\r\nimport _noop from 'lodash/noop';\r\nimport useNotes from '../hooks/useNotes';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  title: {\r\n    cursor: hasNotes => (hasNotes ? 'pointer' : 'default'),\r\n\r\n    '&:hover': {\r\n      backgroundColor: hasNotes => (hasNotes ? 'rgba(0, 0, 0, 0.09)' : 'none'),\r\n    },\r\n  },\r\n}));\r\n\r\nfunction Simple({\r\n  children,\r\n  hasNotes,\r\n  label,\r\n  notes,\r\n  ...props\r\n}) {\r\n  const classes = useStyles(hasNotes);\r\n  const [ref, openNotes, notesComponent] = useNotes(notes);\r\n\r\n  return (\r\n    <Box\r\n      border={1}\r\n      borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n      borderRadius={4}\r\n      bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n      p={1}\r\n      ref={ref}\r\n      {...props}\r\n    >\r\n      <Box\r\n        border={1}\r\n        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n        borderRadius={4}\r\n        bgcolor=\"background.paper\"\r\n      >\r\n        {children}\r\n      </Box>\r\n      <Box mt={1} className={classes.title} onClick={hasNotes ? openNotes : _noop}>\r\n        <Typography align=\"center\" variant=\"body2\">\r\n          {label}{notes ? '*' : ''}\r\n        </Typography>\r\n      </Box>\r\n      {notesComponent}\r\n    </Box>\r\n  )\r\n}\r\n\r\nSimple.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  notes: PropTypes.string,\r\n  hasNotes: PropTypes.bool,\r\n};\r\n\r\nSimple.defaultProps = {\r\n  notes: '',\r\n  hasNotes: true,\r\n}\r\n\r\nexport default Simple;\r\n","// index of the array item is the modifier, so modifiers[18] = 4, modifiers[9] = -1, etc.\r\nexport const modifiers = [\r\n  -5, -5, -4, -4, -3, -3, -2, -2, -1, -1,\r\n  0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5,\r\n  5, 6, 6, 7, 7, 8, 8, 9, 9, 10,\r\n];\r\n\r\nexport default modifiers","import _find from 'lodash/find';\r\nimport { modifiers } from './constants';\r\n\r\nfunction getTotalModifier(character, type, proficient = false, bonusModifier = 0) {\r\n  const { attributes, proficiencyBonus } = character;\r\n  const parsedBonus = bonusModifier ? parseInt(bonusModifier, 10) : 0;\r\n  const bonuses = proficient\r\n   ? (proficiencyBonus + parsedBonus)\r\n   : parsedBonus;\r\n\r\n  try {\r\n    const { value, bonusModifier: attrBonusModifier } =  _find(attributes, { abbv: type });\r\n    const attrModifier = modifiers[value];\r\n    const parsedAttrBonusModifier = attrBonusModifier ? parseInt(attrBonusModifier, 10) : 0;\r\n\r\n    return attrModifier + bonuses + parsedAttrBonusModifier;\r\n  } catch (err) {\r\n    console.error(`${type} is not a valid attribute`);\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default getTotalModifier;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _reduce from 'lodash/reduce';\r\nimport { Simple } from '../../Displays';\r\nimport getTotalModifier from '../../utils/getTotalModifier';\r\n\r\nfunction calculateAc({ ac, ...character }) {\r\n  const { base, attributes, maxAttrMod, modifiers } = ac;\r\n  const attrModifiers = _reduce(attributes, (res, attr) => res + getTotalModifier(character, attr), 0);\r\n  const bonusModifiers = _reduce(modifiers, (res, { active, value }) => (active ? res + value : res), 0)\r\n  const attrMod = (maxAttrMod > -1 && attrModifiers > maxAttrMod)\r\n    ? maxAttrMod\r\n    : attrModifiers;\r\n\r\n  return base + attrMod + bonusModifiers;\r\n}\r\n\r\nfunction ViewArmorClass({\r\n  character,\r\n}) {\r\n  const { ac } = character;\r\n  const { notes } = ac;\r\n  const totalAc = calculateAc(character);\r\n  \r\n  return (\r\n    <Simple label=\"AC\" notes={notes}>\r\n      <Box p={1} textAlign=\"center\" component={Typography}>\r\n        {totalAc}\r\n      </Box>\r\n    </Simple>\r\n  )\r\n}\r\n\r\nViewArmorClass.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default ViewArmorClass;\r\n","const armorClassForm = [\r\n  { accessor: 'base', label: 'Base AC', type: 'number', required: true },\r\n  { accessor: 'divider1', type: 'divider' },\r\n  {\r\n    accessor: 'attributes',\r\n    type: 'checkbox-select',\r\n    title: 'Attribute Modifier(s)',\r\n    options: [\r\n      { label: 'Strength', value: 'str' },\r\n      { label: 'Dexterity', value: 'dex' },\r\n      { label: 'Contstitution', value: 'con' },\r\n      { label: 'Intelligence', value: 'int' },\r\n      { label: 'Wisdom', value: 'wis' },\r\n      { label: 'Charisma', value: 'cha' }\r\n    ],\r\n  },\r\n  { accessor: 'maxAttrMod', type: 'number', helperText: 'Set to -1 to disable' },\r\n  { accessor: 'divider2', type: 'divider' },\r\n  { accessor: 'modifiers', type: 'modifiers', title: 'Equipment/Spells/Etc.' },\r\n  { accessor: 'divider3', type: 'divider' },\r\n  { accessor: 'notes', type: 'multiline' },\r\n];\r\n\r\nexport default armorClassForm;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport ViewArmorClass from './ViewArmorClass';\r\nimport armorClassForm from './armorClassForm';\r\n\r\nfunction EditArmorClass({\r\n  onCancel,\r\n  onSave,\r\n  character,\r\n}) {\r\n  return (\r\n    <EditContainer\r\n      bgcolor=\"background.paper\"\r\n      form={armorClassForm}\r\n      Preview={({ newVal }) => <ViewArmorClass character={{ ...character, ac: newVal }} />}\r\n      onCancel={onCancel}\r\n      onSave={onSave}\r\n      value={character.ac}\r\n      width={320}\r\n    />\r\n  )\r\n}\r\n\r\nEditArmorClass.propTypes = {\r\n  onCancel: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default EditArmorClass;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditArmorClass from './EditArmorClass';\r\nimport ViewArmorClass from './ViewArmorClass';\r\n\r\nfunction ArmorClass({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n  function save(ac) {\r\n    updateCharacter({ ac })\r\n  }\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditArmorClass\r\n        onCancel={() => setEditMode(false)}\r\n        onSave={save}\r\n        character={character}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewArmorClass\r\n        character={character}\r\n      />\r\n    </EditButton>\r\n  );\r\n}\r\n\r\nArmorClass.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ArmorClass;\r\n","import _filter from 'lodash/filter';\r\n\r\nfunction removeByIndex(arr, index) {\r\n  return _filter(arr, (item, i) => i !== index);\r\n}\r\n\r\nexport default removeByIndex;\r\n","import _map from 'lodash/map';\r\n\r\nfunction replaceByIndex(arr, toInsert, index) {\r\n  return _map(arr, (item, i) => (\r\n    i === index\r\n      ? toInsert\r\n      : item\r\n  ));\r\n}\r\n\r\nexport default replaceByIndex;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    transitionDuration: theme.transitions.duration.standard,\r\n    transform: deg => `rotate(${deg}deg)`,\r\n  },\r\n}));\r\n\r\nfunction Rotate({\r\n  children,\r\n  Component,\r\n  deg,\r\n}) {\r\n  const classes = useStyles(deg);\r\n\r\n  return (\r\n    <Component className={classes.root}>\r\n      {children}\r\n    </Component>\r\n  )\r\n}\r\n\r\nRotate.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  Component: PropTypes.node,\r\n  deg: PropTypes.number.isRequired,\r\n};\r\n\r\nRotate.defaultProps = {\r\n  Component: 'div',\r\n};\r\n\r\nexport default Rotate;\r\n","const attackForm = [\r\n  {\r\n    accessor: 'name',\r\n    required: true,\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'uses',\r\n    defaultValue: [],\r\n    type: 'uses',\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'modType',\r\n    required: true,\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'range',\r\n    defaultValue: '',\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'dmg',\r\n    required: true,\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'dmgType',\r\n    required: true,\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'bonusModifier',\r\n    defaultValue: 0,\r\n    type: 'number',\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'proficient',\r\n    defaultValue: false,\r\n    type: 'checkbox',\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'notes',\r\n    defaultValue: '',\r\n    type: 'multiline',\r\n  }, \r\n];\r\n\r\nexport default attackForm;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Checkbox } from '@material-ui/core';\r\nimport {\r\n  RadioButtonChecked,\r\n  RadioButtonUnchecked,\r\n} from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  checkbox: {\r\n    padding: 0,\r\n  }\r\n}));\r\n\r\nfunction Radio({\r\n  checked,\r\n  ...props\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Checkbox\r\n      className={classes.checkbox}\r\n      checked={checked}\r\n      icon={<RadioButtonUnchecked />}\r\n      checkedIcon={<RadioButtonChecked />}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nRadio.propTypes = {\r\n  checked: PropTypes.bool.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Radio;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Collapse,\r\n  Divider,\r\n  Grid,\r\n  IconButton,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport {\r\n  ExpandMore as ExpandMoreIcon,\r\n} from '@material-ui/icons';\r\nimport _fill from 'lodash/fill';\r\nimport _map from 'lodash/map';\r\nimport Badge from '../../Displays/Badge';\r\nimport Markdown from '../../Form/Markdown';\r\nimport Radio from '../../Form/Radio';\r\nimport If from '../../utils/If';\r\nimport Rotate from '../../utils/Rotate';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  expandButton: {\r\n    padding: 0,\r\n  },\r\n  expandWrapper: {\r\n    marginLeft: 'auto',\r\n  },\r\n  name: {\r\n    marginRight: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\nfunction ViewAdvancedTextSection({\r\n  tags,\r\n  name,\r\n  longDesc,\r\n  shortDesc,\r\n  uses,\r\n  setEditMode,\r\n  onSave,\r\n}) {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setSaving(false);\r\n  }, [uses]);\r\n\r\n  function save(val, index) {\r\n    setSaving(true);\r\n\r\n    const total = uses.length;\r\n    const totalUsed = val ? index + 1 : index;\r\n    const totalUnused = total - totalUsed;\r\n    const newUsed = _fill(Array(totalUsed), true);\r\n    const newUnused = _fill(Array(totalUnused), false);\r\n\r\n    onSave({\r\n      name,\r\n      tags,\r\n      longDesc,\r\n      shortDesc,\r\n      uses: [...newUsed, ...newUnused],\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      bgcolor=\"background.paper\"\r\n      border={1}\r\n      borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n      borderRadius={4}\r\n      p={1}\r\n    >\r\n      <Grid alignItems=\"center\" container wrap=\"nowrap\">\r\n        <Grid item>\r\n          <Typography className={classes.name}><strong>{name}</strong></Typography>\r\n        </Grid>\r\n        {_map(uses, (use, i) => (\r\n          <Grid item key={i}>\r\n            <Radio\r\n              checked={use}\r\n              disabled={saving}\r\n              onClick={(evt) => save(evt.target.checked, i)}\r\n            />\r\n          </Grid>\r\n        ))}\r\n        \r\n        <Grid\r\n          className={classes.expandWrapper}\r\n          item\r\n        >\r\n          <If conditions={[longDesc, tags.length]}>\r\n            <Rotate deg={expanded ? 180 : 0}>\r\n              <IconButton onClick={() => setExpanded(!expanded)} className={classes.expandButton}>\r\n                <ExpandMoreIcon />\r\n              </IconButton>\r\n            </Rotate>\r\n          </If>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <If conditions={[shortDesc, expanded]}>\r\n        <Box mx={-1} my={1} >\r\n          <Divider />\r\n        </Box>\r\n      </If>\r\n      <Markdown text={shortDesc} />\r\n      <Collapse in={expanded}>\r\n        <>\r\n          <Box bgcolor=\"rgba(0, 0, 0, 0.09)\" my={1} p={1}>\r\n            <Markdown text={longDesc} />\r\n          </Box>\r\n          {_map(tags, (tag) => (<Badge key={tag} text={tag}/>))}\r\n        </>\r\n      </Collapse>\r\n    </Box>\r\n  )\r\n}\r\n\r\nViewAdvancedTextSection.propTypes = {\r\n  tags: PropTypes.arrayOf(PropTypes.string),\r\n  name: PropTypes.string.isRequired,\r\n  longDesc: PropTypes.string,\r\n  shortDesc: PropTypes.string,\r\n  uses: PropTypes.arrayOf(PropTypes.bool),\r\n};\r\n\r\nViewAdvancedTextSection.defaultProps = {\r\n  name: '',\r\n  longDesc: '',\r\n  shortDesc: '',\r\n  tags: [],\r\n  uses: [],\r\n};\r\n\r\nexport default ViewAdvancedTextSection;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _toUpper from 'lodash/toUpper';\r\nimport getNumericPrefix from '../../utils/getNumericPrefix';\r\nimport getTotalModifier from '../../utils/getTotalModifier';\r\nimport ViewAdvancedTextSection from '../AdvancedTextSection/ViewAdvancedTextSection';\r\n\r\nconst BASE_SAVE_DC = 8;\r\n\r\nfunction getSave(character, type) {\r\n  const  [attr, save] = type.split(':');\r\n  const dc = getTotalModifier(character, attr, true, BASE_SAVE_DC);\r\n\r\n  return `${_toUpper(save)}${dc}`\r\n}\r\n\r\nfunction getHit(atk, character) {\r\n  const { modType, bonusModifier, proficient } = atk;\r\n  const isSave = modType.indexOf(':') > -1;\r\n\r\n  if (!isSave) {\r\n    const modifier = getTotalModifier(character, modType, proficient, bonusModifier);\r\n\r\n    return `${getNumericPrefix(modifier)}${modifier}`;\r\n  }\r\n\r\n  return getSave(character, modType);\r\n}\r\n\r\nfunction getDamage(dmg, modifier) {\r\n  const prefix = modifier ? `${getNumericPrefix(modifier)}${modifier}` : '';\r\n\r\n  return dmg + prefix\r\n}\r\n\r\nfunction getName(name, modifier) {\r\n  const prefix = modifier ? `${getNumericPrefix(modifier)}${modifier} ` : '';\r\n\r\n  return prefix + name;\r\n}\r\n\r\nfunction ViewAttack({\r\n  attack,\r\n  character,\r\n  onSave,\r\n}) {\r\n  const {\r\n    dmg,\r\n    dmgType,\r\n    name,\r\n    uses,\r\n    range,\r\n    notes,\r\n    bonusModifier,\r\n  } = attack;\r\n  const atkName = getName(name, bonusModifier);\r\n  const atkRange = range ? `range: ${range} | ` : '';\r\n  const hit = getHit(attack, character);\r\n  const damage = getDamage(dmg, bonusModifier);\r\n\r\n  function save({ uses: newUses }) {\r\n    onSave({\r\n      ...attack,\r\n      uses: newUses,\r\n    })\r\n  }\r\n\r\n  return (\r\n    <ViewAdvancedTextSection\r\n      onSave={save}\r\n      tags={[]}\r\n      name={atkName}\r\n      longDesc={notes}\r\n      shortDesc={`${atkRange}hit: ${hit} | dmg: ${damage} | type: ${dmgType}`}\r\n      uses={uses}\r\n    />\r\n  )\r\n}\r\n\r\nViewAttack.propTypes = {\r\n  attack: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default ViewAttack;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport attackForm from './attackForm';\r\nimport ViewAttack from './ViewAttack';\r\n\r\nfunction EditAttack({\r\n  attack,\r\n  character,\r\n  onCancel,\r\n  onDelete,\r\n  onSave,\r\n}) {\r\n  return (\r\n    <EditContainer\r\n      form={attackForm}\r\n      Preview={({ newVal }) => <ViewAttack attack={newVal} character={character} />}\r\n      onCancel={onCancel}\r\n      onDelete={onDelete}\r\n      onSave={onSave}\r\n      value={attack}\r\n    />\r\n  );\r\n}\r\n\r\nEditAttack.propTypes = {\r\n  attack: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n  onCancel: PropTypes.func.isRequired,\r\n  onDelete: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default EditAttack;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditAttack from './EditAttack';\r\nimport ViewAttack from './ViewAttack';\r\n\r\nfunction Attack({\r\n  attack,\r\n  character,\r\n  onDelete,\r\n  onSave,\r\n}) {\r\n  const { name } = attack;\r\n  const [editMode, setEditMode] = useState(!name);\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditAttack\r\n        attack={attack}\r\n        character={character}\r\n        onCancel={() => setEditMode(false)}\r\n        onDelete={onDelete}\r\n        onSave={onSave}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewAttack attack={attack} character={character} onSave={onSave} />\r\n    </EditButton>\r\n  )\r\n}\r\n\r\nAttack.propTypes = {\r\n  attack: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n  onDelete: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Attack;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Tab,\r\n  Tabs,\r\n  TextField,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport { \r\n  Add as AddIcon,\r\n} from '@material-ui/icons';\r\nimport _filter from 'lodash/filter';\r\nimport _isEqual from 'lodash/isEqual';\r\nimport _last from 'lodash/last';\r\nimport _map from 'lodash/map';\r\nimport _uniq from 'lodash/uniq';\r\nimport {\r\n  Confirm,\r\n  removeByIndex,\r\n  replaceByIndex,\r\n} from '../../utils';\r\nimport AddButton from '../../Form/AddButton';\r\nimport Attack from './Attack';\r\n\r\nconst useTabsStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: theme.spacing(1),\r\n    marginBottom: 0,\r\n  },\r\n  indicator: {\r\n    transition: '0s all',\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderBottom: '1px solid white',\r\n    borderBottomColor: theme.palette.background.paper,\r\n    left: '0 !important',\r\n    right: 0,\r\n    width: 'auto !important',\r\n    zIndex: 2,\r\n  },\r\n}));\r\n\r\nconst useTabStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderLeft: '1px solid rgba(0, 0, 0, 0.42)',\r\n    borderTop: '1px solid rgba(0, 0, 0, 0.42)',\r\n    borderRadius: '4px 4px 0 0',\r\n    marginTop: theme.spacing(1),\r\n\r\n    '&:last-child': {\r\n      borderRight: '1px solid rgba(0, 0, 0, 0.42)',\r\n    },\r\n\r\n    '&:hover': {\r\n    },\r\n    '&$selected': {\r\n      marginTop: 0,\r\n      borderRight: '1px solid rgba(0, 0, 0, 0.42)',\r\n      background: theme.palette.background.paper,\r\n\r\n      '& + $root': {\r\n        borderLeft: 'none',\r\n      },\r\n    },\r\n    '&:focus': {\r\n    },\r\n  },\r\n  selected: {},\r\n}));\r\n\r\nfunction createNewAttack(category) {\r\n  return {\r\n    bonusModifier: 0,\r\n    dmg: '',\r\n    dmgType: '',\r\n    category,\r\n    name: '',\r\n    notes: '',\r\n    range: '',\r\n    uses: 0,\r\n  }\r\n}\r\n\r\nfunction Attacks({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const { attacks } = character;\r\n  const [newAttacks, setNewAttacks] = useState(attacks);\r\n  const [newTab, setNewTab] = useState('');\r\n  const tabsClasses = useTabsStyles();\r\n  const tabClasses = useTabStyles();\r\n  const categories = useMemo(() => {\r\n    const cats = _map(newAttacks, ({ category }) => category);\r\n\r\n    return _uniq(cats);\r\n  }, [newAttacks]);\r\n  const [tab, setTab] = useState(categories[0]);\r\n  const addDisabled = !_last(newAttacks).name\r\n\r\n  useEffect(() => {\r\n    setNewAttacks(attacks);\r\n  }, [attacks]);\r\n\r\n  function onDelete(index) {\r\n    const categoryOfDeletedItem = newAttacks[index].category;\r\n    const numberOfItemsInCategory = _filter(newAttacks, { category: categoryOfDeletedItem}).length;\r\n    const updatedAttacks = removeByIndex(newAttacks, index);\r\n\r\n    if (numberOfItemsInCategory === 1) {\r\n      setTab(categories[0])\r\n    }\r\n\r\n    if (_isEqual(updatedAttacks, attacks)) {\r\n      setNewAttacks(updatedAttacks);\r\n    } else {\r\n      updateCharacter({ attacks: updatedAttacks });\r\n    }\r\n  }\r\n\r\n  function onSave(newAttack, index) {\r\n    const updatedAttacks = replaceByIndex(newAttacks, newAttack, index);\r\n\r\n    updateCharacter({ attacks: updatedAttacks });\r\n  }\r\n\r\n  function onAdd(category) {\r\n    if (category) {\r\n      setNewAttacks([...newAttacks, createNewAttack(category)]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n      border={1}\r\n      borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n      borderRadius={4}\r\n    >\r\n      <Tabs\r\n        classes={tabsClasses}\r\n        value={tab}\r\n        variant=\"scrollable\"\r\n        onChange={(_, val) => categories.indexOf(val) > -1 && setTab(val)}\r\n      >\r\n        {_map(categories, (cat) => (\r\n          <Tab\r\n            classes={tabClasses}\r\n            disabled={addDisabled}\r\n            key={cat}\r\n            label={cat}\r\n            value={cat}\r\n          />\r\n        ))}\r\n        <Confirm\r\n          Component={Tab}\r\n          classes={tabClasses}\r\n          disabled={addDisabled}\r\n          label={<AddIcon />}\r\n          text={(\r\n            <TextField\r\n              fullWidth\r\n              label=\"Title\"\r\n              value={newTab}\r\n              variant=\"filled\"\r\n              onChange={(evt) => setNewTab(evt.target.value)}\r\n            />\r\n          )}\r\n          title=\"New Category\"\r\n          onConfirm={() => {\r\n            onAdd(newTab);\r\n            setTab(newTab);\r\n            setNewTab('');\r\n          }}\r\n        />\r\n      </Tabs>\r\n      <Box\r\n        bgcolor=\"background.paper\"\r\n        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n        borderBottom={1}\r\n        borderTop={1}\r\n        p={2}\r\n        mt=\"-3px\"\r\n      >\r\n        <Grid container spacing={2}>\r\n          {_map(newAttacks, (attack, i) => attack.category === tab && (\r\n            <Grid item xs={12} key={attack.name}>\r\n              <Attack\r\n                attack={attack}\r\n                character={character}\r\n                onDelete={() => onDelete(i)}\r\n                onSave={(newAttack) => onSave({ ...newAttack, category: tab }, i)}\r\n              />\r\n            </Grid>\r\n          ))}\r\n          <Grid item xs={12}>\r\n            <AddButton disabled={addDisabled} onAdd={() => onAdd(tab)} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Box p={2}>\r\n        <Typography align=\"center\" variant=\"h6\">Attacks</Typography>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nAttacks.propTypes = {\r\n  character: PropTypes.shape(),\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Attacks;\r\n","const attributeForm = [\r\n  {\r\n    accessor: 'name',\r\n    disabled: true,\r\n  }, {\r\n    accessor: 'value',\r\n    type: 'number',\r\n    required: true,\r\n  }, {\r\n    accessor: 'bonusModifier',\r\n    type: 'number',\r\n    defaultValue: 0,\r\n  }, {\r\n    accessor: 'notes',\r\n    type: 'multiline',\r\n    defaultValue: '',\r\n  },\r\n]\r\n\r\nexport default attributeForm;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _cloneDeep from 'lodash/cloneDeep';\r\nimport _findIndex from 'lodash/findIndex';\r\nimport getNumericPrefix from '../../utils/getNumericPrefix';\r\nimport getTotalModifier from '../../utils/getTotalModifier';\r\nimport useNotes from '../../hooks/useNotes';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    borderRadius: '4px 4px 0 0',\r\n  },\r\n  modifier: {\r\n    width: theme.spacing(6),\r\n    height: theme.spacing(6),\r\n  },\r\n}));\r\n\r\nfunction ViewAttribute({\r\n  attribute,\r\n  character,\r\n}) {\r\n  const {\r\n    abbv,\r\n    name,\r\n    notes,\r\n    value,\r\n  } = attribute;\r\n  const attrIndex = _findIndex(character.attributes, { name });\r\n  const charWithUpdatedAttribute = _cloneDeep(character);\r\n\r\n  charWithUpdatedAttribute.attributes[attrIndex] = attribute;\r\n\r\n  const modifier = getTotalModifier(charWithUpdatedAttribute, abbv);\r\n  const [ref, openNotes, notesComponent] = useNotes(notes);\r\n  const classes = useStyles();\r\n  const renderedName = notes ? `${name}*` : name;\r\n\r\n  return (\r\n    <Box position=\"relative\" pb={3}>\r\n      <Box\r\n        bgcolor=\"white\"\r\n        border={1}\r\n        borderColor=\"grey.500\"\r\n        borderRadius={4}\r\n        className={classes.wrapper}\r\n        ref={ref}\r\n      >\r\n        <Button\r\n          className={classes.button}\r\n          color=\"primary\"\r\n          fullWidth\r\n          onClick={openNotes}\r\n          variant=\"contained\"\r\n        >\r\n          {renderedName}\r\n        </Button>\r\n        <Box\r\n          p={2}\r\n          width={1}\r\n          bgcolor=\"grey.200\"\r\n        >\r\n          <Typography align=\"center\">{value}</Typography>\r\n        </Box>\r\n        <Box bgcolor=\"primary.main\" p={1} />\r\n      </Box>\r\n      <Box\r\n        border={1}\r\n        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n        display=\"flex\"\r\n        p={.5}\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        className={classes.modifier}\r\n        bgcolor=\"grey.200\"\r\n        borderRadius=\"50%\"\r\n        bottom={0}\r\n        left={0}\r\n        right={0}\r\n        mx=\"auto\"\r\n        position=\"absolute\"\r\n        textAlign=\"center\"\r\n      >\r\n        <Typography align=\"center\">{`${getNumericPrefix(modifier)}${modifier}`}</Typography>\r\n      </Box>\r\n      {notesComponent}\r\n    </Box>\r\n  );\r\n}\r\n\r\nViewAttribute.propTypes = {\r\n  attribute: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default ViewAttribute;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport attributeForm from './attributeForm';\r\nimport ViewAttribute from './ViewAttribute';\r\n\r\nfunction EditAttribute({\r\n  attribute,\r\n  character,\r\n  onCancel,\r\n  onSave,\r\n}) {\r\n  return (\r\n    <EditContainer\r\n      onCancel={onCancel}\r\n      onSave={onSave}\r\n      form={attributeForm}\r\n      Preview={({ newVal }) => <ViewAttribute attribute={newVal} character={character} />}\r\n      value={attribute}\r\n    />\r\n  )\r\n}\r\n\r\nEditAttribute.propTypes = {\r\n  attribute: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n  onCancel: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default EditAttribute;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditAttribute from './EditAttribute';\r\nimport ViewAttribute from './ViewAttribute';\r\n\r\nfunction Attribute({\r\n  attribute,\r\n  character,\r\n  onSave,\r\n}) {\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditAttribute\r\n        attribute={attribute}\r\n        character={character}\r\n        onSave={onSave}\r\n        onCancel={() => setEditMode(false)}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewAttribute attribute={attribute} character={character} />\r\n    </EditButton>\r\n  );\r\n}\r\n\r\nAttribute.propTypes = {\r\n  attribute: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Attribute;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Grid } from '@material-ui/core';\r\nimport _map from 'lodash/map';\r\nimport Attribute from './Attribute';\r\n\r\nfunction Attributes({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  function saveAttribute(attributeIndex) {\r\n    return (updatedAttribute) => {\r\n      const updatedAttributes = character.attributes;\r\n\r\n      updatedAttributes[attributeIndex] = updatedAttribute;\r\n\r\n      updateCharacter({ ...character, attributes: updatedAttributes });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={3}>\r\n      {_map(character.attributes, (attribute, i) => (\r\n        <Grid item xs={12} key={attribute.name}>\r\n          <Attribute attribute={attribute} character={character} onSave={saveAttribute(i)} />\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  )\r\n}\r\n\r\nAttributes.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Attributes;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _fill from 'lodash/fill';\r\nimport _filter from 'lodash/filter';\r\nimport _get from 'lodash/get';\r\nimport Radio from '../Form/Radio';\r\n\r\nfunction DeathSaves({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const [saving, setSaving] = useState(false);\r\n  const health = _get(character, 'health', {});\r\n  const deathSaves = _get(health, 'deathSaves', []);\r\n  const numberOfSuccesses = _filter(deathSaves, Boolean).length;\r\n  const numberOfFailures = deathSaves.length - numberOfSuccesses;\r\n\r\n  useEffect(() => {\r\n    setSaving(false);\r\n  }, [deathSaves]);\r\n\r\n  function save(newDeathSaves) {\r\n    setSaving(true);\r\n\r\n    updateCharacter({\r\n      health: {\r\n        ...health,\r\n        deathSaves: newDeathSaves,\r\n      },\r\n    })\r\n  }\r\n\r\n  function getNewDeathSaves(index, val, isSuccess) {\r\n    const total = val ? index + 1 : index;\r\n    const newSaves = _fill(Array(total), isSuccess);\r\n    const oldSaves = _filter(deathSaves, (ds) => ds !== isSuccess);\r\n\r\n    return [...oldSaves, ...newSaves];\r\n  }\r\n\r\n  function handleSuccess(index, val) {\r\n    save(getNewDeathSaves(index, val, true));\r\n  }\r\n\r\n  function handleFailure(index, val) {\r\n    save(getNewDeathSaves(index, val, false));\r\n  }\r\n\r\n  return (\r\n    <Box border={1} borderColor=\"rgba(0, 0, 0, 0.42)\" p={1.25} borderRadius={4}>\r\n      <Box mb={1}>\r\n        <Grid container spacing={1}>\r\n          <Grid item xs={6}>\r\n            <Typography align=\"right\">Successes</Typography>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Grid container spacing={1}>\r\n              <Grid item>\r\n                <Radio\r\n                  disabled={saving}\r\n                  checked={numberOfSuccesses > 0}\r\n                  onClick={(e) => handleSuccess(0, e.target.checked)}\r\n                />\r\n              </Grid>\r\n              <Grid item>\r\n                <Radio\r\n                  disabled={saving}\r\n                  checked={numberOfSuccesses > 1}\r\n                  onClick={(e) => handleSuccess(1, e.target.checked)}\r\n                />\r\n              </Grid>\r\n              <Grid item>\r\n                <Radio\r\n                  disabled={saving}\r\n                  checked={numberOfSuccesses > 2}\r\n                  onClick={(e) => handleSuccess(2, e.target.checked)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Typography align=\"right\">Failures</Typography>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Grid container spacing={1}>\r\n              <Grid item>\r\n                <Radio\r\n                  disabled={saving}\r\n                  checked={numberOfFailures > 0}\r\n                  onClick={(e) => handleFailure(0, e.target.checked)}\r\n                />\r\n              </Grid>\r\n              <Grid item>\r\n                <Radio\r\n                  disabled={saving}\r\n                  checked={numberOfFailures > 1}\r\n                  onClick={(e) => handleFailure(1, e.target.checked)}\r\n                />\r\n              </Grid>\r\n              <Grid item>\r\n                <Radio\r\n                  disabled={saving}\r\n                  checked={numberOfFailures > 2}\r\n                  onClick={(e) => handleFailure(2, e.target.checked)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Typography align=\"center\" variant=\"h6\">Death Saves</Typography>\r\n    </Box>\r\n  )\r\n}\r\n\r\nDeathSaves.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default DeathSaves;\r\n","const advancedTextSectionForm = [\r\n  {\r\n    accessor: 'name',\r\n    required: true,\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'uses',\r\n    type: 'uses',\r\n    defaultValue: [],\r\n    sm: 6,\r\n  }, {\r\n    accessor: 'shortDesc',\r\n    defaultValue: '',\r\n  }, {\r\n    accessor: 'longDesc',\r\n    defaultValue: '',\r\n  }, {\r\n    accessor: 'tags',\r\n    type: 'list',\r\n    defaultValue: [],\r\n    helperText: 'Comma delineated'\r\n  },\r\n];\r\n\r\nexport default advancedTextSectionForm;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Box } from '@material-ui/core';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport advancedTextSectionForm from './advancedTextSectionForm';\r\nimport ViewAdvancedTextSection from './ViewAdvancedTextSection';\r\n\r\nfunction EditAdvancedTextSection({\r\n  onCancel,\r\n  onDelete,\r\n  onSave,\r\n  tags,\r\n  name,\r\n  longDesc,\r\n  shortDesc,\r\n  uses,\r\n}) {\r\n  const value = {\r\n    tags,\r\n    name,\r\n    longDesc,\r\n    shortDesc,\r\n    uses,\r\n  }\r\n\r\n  return (\r\n    <Box bgcolor=\"background.paper\" borderRadius={4} > \r\n      <EditContainer\r\n        form={advancedTextSectionForm}\r\n        Preview={({ newVal }) => <ViewAdvancedTextSection {...newVal} />}\r\n        onCancel={onCancel}\r\n        onDelete={onDelete}\r\n        onSave={onSave}\r\n        value={value}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nEditAdvancedTextSection.propTypes = {\r\n  onCancel: PropTypes.func.isRequired,\r\n  onDelete: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n  tags: PropTypes.arrayOf(PropTypes.string),\r\n  name: PropTypes.string.isRequired,\r\n  longDesc: PropTypes.string,\r\n  shortDesc: PropTypes.string,\r\n  uses: PropTypes.arrayOf(PropTypes.bool),\r\n};\r\n\r\nEditAdvancedTextSection.defaultProps = {\r\n  name: '',\r\n  longDesc: '',\r\n  shortDesc: '',\r\n  tags: [],\r\n  uses: [],\r\n};\r\n\r\nexport default EditAdvancedTextSection;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditAdvancedTextSection from './EditAdvancedTextSection';\r\nimport ViewAdvancedTextSection from './ViewAdvancedTextSection';\r\n\r\nfunction AdvancedTextSection({\r\n  onDelete,\r\n  onSave,\r\n  tags,\r\n  name,\r\n  longDesc,\r\n  shortDesc,\r\n  uses,\r\n}) {\r\n  const [editMode, setEditMode] = useState(!name);\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditAdvancedTextSection\r\n        onCancel={() => setEditMode(false)}\r\n        onDelete={onDelete}\r\n        onSave={onSave}\r\n        tags={tags}\r\n        name={name}\r\n        longDesc={longDesc}\r\n        shortDesc={shortDesc}\r\n        uses={uses}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewAdvancedTextSection\r\n        tags={tags}\r\n        name={name}\r\n        longDesc={longDesc}\r\n        shortDesc={shortDesc}\r\n        uses={uses}\r\n        onSave={onSave}\r\n      />\r\n    </EditButton>\r\n  );\r\n}\r\n\r\nAdvancedTextSection.propTypes = {\r\n  onDelete: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n  tags: PropTypes.arrayOf(PropTypes.string),\r\n  name: PropTypes.string.isRequired,\r\n  longDesc: PropTypes.string,\r\n  shortDesc: PropTypes.string,\r\n  uses: PropTypes.arrayOf(PropTypes.bool),\r\n};\r\n\r\nAdvancedTextSection.defaultProps = {\r\n  name: '',\r\n  longDesc: '',\r\n  shortDesc: '',\r\n  tags: [],\r\n  uses: [],\r\n};\r\n\r\nexport default AdvancedTextSection;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Box } from '@material-ui/core';\r\nimport _map from 'lodash/map';\r\nimport HorizontalInput from '../../Form/HorizontalInput';\r\n\r\nfunction Currency({\r\n  money,\r\n  updateCharacter,\r\n}) {\r\n  function onSave(newVal, key) {\r\n    updateCharacter({ money: { ...money, [key]: parseInt(newVal, 10) }});\r\n  }\r\n\r\n  return _map(money, (val, key) => (\r\n    <Box key={key} pb={1}>\r\n      <HorizontalInput\r\n        label={key.toUpperCase()}\r\n        onSave={(newVal) => onSave(newVal, key)}\r\n        value={val}\r\n        inputFirst={false}\r\n      />\r\n    </Box>\r\n  ));\r\n}\r\n\r\nCurrency.propTypes = {\r\n  money: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default Currency;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _isEqual from 'lodash/isEqual';\r\nimport _last from 'lodash/last';\r\nimport _map from 'lodash/map';\r\nimport {\r\n  removeByIndex,\r\n  replaceByIndex,\r\n} from '../../utils';\r\nimport AddButton from '../../Form/AddButton';\r\nimport AdvancedTextSection from '../AdvancedTextSection';\r\nimport Currency from './Currency';\r\n\r\nconst NEW_EQUIPMENT_TEMPLATE = {\r\n  name: '',\r\n  uses: [],\r\n  shortDesc: '',\r\n  longDesc: '',\r\n  tags: [],\r\n};\r\n\r\nfunction Equipment({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const { equipment, money } = character;\r\n  const [newEquipment, setNewEquipment] = useState(equipment);\r\n  const addButtonDisabled = !_last(newEquipment).name;\r\n\r\n  useEffect(() => {\r\n    setNewEquipment(equipment);\r\n  }, [equipment])\r\n\r\n  function onAdd() {\r\n    setNewEquipment([...newEquipment, NEW_EQUIPMENT_TEMPLATE]);\r\n  }\r\n\r\n  function onDelete(index) {\r\n    const updatedEquipment = removeByIndex(newEquipment, index);\r\n\r\n    if (_isEqual(updatedEquipment, equipment)) {\r\n      setNewEquipment([...updatedEquipment])\r\n    } else {\r\n      updateCharacter({ equipment: updatedEquipment });\r\n    }\r\n  }\r\n\r\n  function onSave(updatedItem, index) {\r\n    const updatedEquipment = replaceByIndex(newEquipment, updatedItem, index);\r\n\r\n    updateCharacter({ equipment: updatedEquipment });\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      border={1}\r\n      borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n      borderRadius={4}\r\n      p={2}\r\n    >\r\n      <Grid container spacing={1} wrap=\"nowrap\">\r\n        <Box width={100} ml={-2.5}>\r\n          <Currency money={money} updateCharacter={updateCharacter} />\r\n        </Box>\r\n        <Box pl={2}>\r\n          {_map(newEquipment, (equip, i) => (\r\n            <Box key={equip.name} pb={1}>\r\n              <AdvancedTextSection\r\n                onDelete={() => onDelete(i)}\r\n                onSave={(newItem) => onSave(newItem, i)}\r\n                {...equip}\r\n              />\r\n            </Box>\r\n          ))}\r\n          <AddButton disabled={addButtonDisabled} onAdd={onAdd} />\r\n        </Box>\r\n      </Grid>\r\n      <Box\r\n        bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n        borderTop={1}\r\n        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n        mx={-2}\r\n        mb={-2}\r\n        mt={2}\r\n        p={2}\r\n      >\r\n        <Typography align=\"center\" variant=\"h6\">Equipment</Typography>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nEquipment.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Equipment;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _isEqual from 'lodash/isEqual';\r\nimport _last from 'lodash/last';\r\nimport _map from 'lodash/map';\r\nimport {\r\n  removeByIndex,\r\n  replaceByIndex,\r\n} from '../../utils';\r\nimport AddButton from '../../Form/AddButton';\r\nimport AdvancedTextSection from '../AdvancedTextSection';\r\n\r\nconst NEW_FEATURES_TEMPLATE = {\r\n  name: '',\r\n  uses: [],\r\n  shortDesc: '',\r\n  longDesc: '',\r\n  tags: [],\r\n};\r\n\r\nfunction Features({\r\n  features,\r\n  updateCharacter,\r\n}) {\r\n  const [newFeatures, setNewFeatures] = useState(features);\r\n  const addButtonDisabled = !_last(newFeatures).name;\r\n\r\n  useEffect(() => {\r\n    setNewFeatures(features);\r\n  }, [features]);\r\n\r\n  function onAdd() {\r\n    setNewFeatures([...newFeatures, NEW_FEATURES_TEMPLATE]);\r\n  }\r\n\r\n  function onDelete(index) {\r\n    const updatedFeatures = removeByIndex(newFeatures, index);\r\n\r\n    if (_isEqual(updatedFeatures, Features)) {\r\n      setNewFeatures([...updatedFeatures]);\r\n    } else {\r\n      updateCharacter({ features: updatedFeatures });\r\n    }\r\n  }\r\n\r\n  function onSave(updatedItem, index) {\r\n    const updatedFeatures = replaceByIndex(newFeatures, updatedItem, index);\r\n\r\n    updateCharacter({ features: updatedFeatures });\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n      borderRadius={4}\r\n      p={2}\r\n    >\r\n      <Grid container spacing={2}>\r\n        {_map(newFeatures, (feature, i) => (\r\n          <Grid item xs={12} key={feature.name}>\r\n            <AdvancedTextSection\r\n              onDelete={() => onDelete(i)}\r\n              onSave={(item) => onSave(item, i)}\r\n              {...feature}\r\n            />\r\n          </Grid>\r\n        ))}\r\n\r\n        <Grid item xs={12}>\r\n          <AddButton disabled={addButtonDisabled} onAdd={onAdd} />\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <Typography align=\"center\" variant=\"h6\">Features &amp; Traits</Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\nFeatures.propTypes = {\r\n  features: PropTypes.arrayOf(PropTypes.shape()).isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Features;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Divider,\r\n  Grid,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _map from 'lodash/map';\r\nimport { getNumericPrefix } from '../../utils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderLeft: '1px solid rgba(0, 0, 0, 0.09)',\r\n  },\r\n  positive: {\r\n    color: theme.palette.success.main,\r\n  },\r\n  negative: {\r\n    color: theme.palette.error.main,\r\n  },\r\n}));\r\n\r\nfunction getClassName(num) {\r\n  if (num === 0) {\r\n    return 'zero';\r\n  }\r\n\r\n  return num > 0 ? 'positive' : 'negative';\r\n}\r\n\r\nfunction HealthHistory({\r\n  history,\r\n  startHealth,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <Grid item xs={12}>\r\n        <Typography align=\"right\">{startHealth}</Typography>\r\n      </Grid>\r\n      {_map(history, ({ modifier, newTotal }, i) => (\r\n        <React.Fragment key={i}>\r\n          <Grid item xs={12}>\r\n            <Typography align=\"right\" className={classes[getClassName(modifier)]}>\r\n              {getNumericPrefix(modifier)}{modifier}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Divider />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography align=\"right\">\r\n              {newTotal}\r\n            </Typography>\r\n          </Grid>\r\n        </React.Fragment>\r\n      ))}\r\n    </Grid>\r\n  )\r\n}\r\n\r\nHealthHistory.propTypes = {\r\n  history: PropTypes.arrayOf(PropTypes.shape({\r\n    modifier: PropTypes.number.isRequired,\r\n    newTotal: PropTypes.number.isRequired,\r\n  })).isRequired,\r\n  startHealth: PropTypes.number,\r\n};\r\n\r\nexport default HealthHistory;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { getNumericValue } from '../../utils';\r\nimport FormItem from '../../Form/FormItem';\r\n\r\nfunction getChangeType(val) {\r\n  const firstChar = val[0];\r\n\r\n  if (firstChar === '-' || firstChar === '+') {\r\n    return 'delta';\r\n  }\r\n\r\n  if (isNaN(parseInt(firstChar, 10))) {\r\n    return 'invalid';\r\n  }\r\n\r\n  return 'set';\r\n}\r\n\r\nfunction getModifier(hp, val, type) {\r\n  const parsedVal = getNumericValue(val);\r\n\r\n  if (type === 'delta') {\r\n    return parsedVal;\r\n  }\r\n\r\n  return parsedVal - hp;\r\n}\r\n\r\nfunction UpdateHealth({\r\n  updateCurrentHP,\r\n  updateHealthHistory,\r\n  hp,\r\n}) {\r\n  const [newVal, setNewVal] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n  const [newHistory, setNewHistory] = useState(null);\r\n\r\n  function save() {\r\n    const type = getChangeType(newVal);\r\n\r\n    if (type === 'invalid') {\r\n      return;\r\n    }\r\n\r\n    const modifier = getModifier(hp, newVal, type);\r\n    const newTotal = hp + modifier;\r\n\r\n    if (modifier === 0) {\r\n      updateHealthHistory(newHistory);\r\n      return;\r\n    }\r\n\r\n    setNewHistory({ newTotal, modifier })\r\n    setSaving(true);\r\n\r\n    updateCurrentHP(newTotal);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (newHistory && !saving) {\r\n      updateHealthHistory(newHistory);\r\n      setNewHistory(null);\r\n    }\r\n  }, [newHistory, saving, updateHealthHistory])\r\n\r\n  useEffect(() => {\r\n    setNewVal('');\r\n    setSaving(false);\r\n\r\n  }, [hp]);\r\n\r\n  return (\r\n    <FormItem\r\n      disabled={saving}\r\n      value={newVal}\r\n      setValue={setNewVal}\r\n      onBlur={save}\r\n      onEnter={save}\r\n      label=\"Update\"\r\n    />\r\n  )\r\n}\r\n\r\nUpdateHealth.propTypes = {\r\n  hp: PropTypes.number.isRequired,\r\n  updateCurrentHP: PropTypes.func.isRequired,\r\n  updateHealthHistory: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default UpdateHealth;\r\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { v4 } from 'uuid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Grid,\r\n} from '@material-ui/core';\r\nimport { Section } from '../../Displays';\r\nimport HealthHistory from './HealthHistory';\r\nimport UpdateHealth from './UpdateHealth';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    height: '100%',\r\n    flexDirection: 'column',\r\n\r\n    '& > div:first-child': {\r\n      flexGrow: 1,\r\n    },\r\n  },\r\n  currentHp: {\r\n    fontSize: '4rem',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  rightSide: {\r\n    flexDirection: 'column',\r\n    justifyContent: 'flex-end',\r\n    flexWrap: 'nowrap',\r\n    height: ({ height }) => height - theme.spacing(2),\r\n    overflow: 'hidden',\r\n  },\r\n}));\r\n\r\nfunction Health({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const id = useMemo(v4, [v4]);\r\n  const [height, setHeight] = useState(0);\r\n  const { health } = character;\r\n  const { currentHp } = health;\r\n  const classes = useStyles({ height });\r\n  const startHealth = useRef(currentHp);\r\n  const [healthHistory, setHealthHistory] = useState([]);\r\n\r\n  function updateHealthHistory(newHistory) {\r\n    setHealthHistory([...healthHistory, newHistory]);\r\n  }\r\n\r\n  function updateCurrentHP(newHp) {\r\n    updateCharacter({ health: { ...health, currentHp: newHp }});\r\n  }\r\n\r\n  useEffect(() => {\r\n    setHeight(document.getElementById(id).offsetHeight)\r\n  }, [id])\r\n\r\n  return (\r\n    <Section\r\n      className={classes.root}\r\n      label=\"Current HP\"\r\n    >\r\n      <Box p={1} height={1} id={id}>\r\n        <Grid container spacing={2} className={classes.wrapper}>\r\n          <Grid item xs={6} className={classes.currentHp}>\r\n            {currentHp}\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Grid\r\n              container\r\n              className={classes.rightSide}\r\n            >\r\n              <Grid item className={classes.historyWrapper}>\r\n                <HealthHistory\r\n                  history={healthHistory}\r\n                  startHealth={startHealth.current}\r\n                />\r\n              </Grid>\r\n              <Grid item>\r\n                <UpdateHealth\r\n                  updateCurrentHP={updateCurrentHP}\r\n                  updateHealthHistory={updateHealthHistory}\r\n                  hp={currentHp}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Section>\r\n  )\r\n}\r\n\r\nHealth.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Health;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _reduce from 'lodash/reduce';\r\nimport { Simple } from '../../Displays';\r\nimport getTotalModifier from '../../utils/getTotalModifier';\r\nimport getNumericPrefix from '../../utils/getNumericPrefix';\r\n\r\nfunction calculateInitiative({ initiative, ...character }) {\r\n  const { modifiers } = initiative;\r\n  const attrModifier = getTotalModifier(character, 'dex');\r\n  const bonusModifiers = _reduce(modifiers, (res, { active, value }) => (active ? res + value : res), 0)\r\n\r\n  return attrModifier + bonusModifiers;\r\n}\r\n\r\nfunction ViewInitiative({\r\n  character,\r\n}) {\r\n  const { initiative } = character;\r\n  const { notes } = initiative;\r\n  const totalInitiative = calculateInitiative(character);\r\n\r\n  return (\r\n    <Simple label=\"Initiative\" notes={notes}>\r\n      <Box p={1} textAlign=\"center\" component={Typography}>\r\n        {getNumericPrefix(totalInitiative)}\r\n        {totalInitiative}\r\n      </Box>\r\n    </Simple>\r\n  )\r\n}\r\n\r\nViewInitiative.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default ViewInitiative;\r\n","const armorClassForm = [\r\n  { accessor: 'text', type: 'static-text', text: 'Base initiative = DEX modifier', variant: 'body1' },\r\n  { accessor: 'divider1', type: 'divider' },\r\n  { accessor: 'modifiers', type: 'modifiers', title: 'Feats/Spells/Etc.', defaultValue: [], },\r\n  { accessor: 'divider2', type: 'divider' },\r\n  { accessor: 'notes', type: 'multiline' },\r\n];\r\n\r\nexport default armorClassForm;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport ViewInitiative from './ViewInitiative';\r\nimport initiativeForm from './initiativeForm';\r\n\r\nfunction EditInitiative({\r\n  onCancel,\r\n  onSave,\r\n  character,\r\n}) {\r\n  return (\r\n    <EditContainer\r\n      bgcolor=\"background.paper\"\r\n      form={initiativeForm}\r\n      Preview={({ newVal }) => <ViewInitiative character={{ ...character, initiative: newVal }} />}\r\n      onCancel={onCancel}\r\n      onSave={onSave}\r\n      value={character.initiative}\r\n      width={320}\r\n    />\r\n  )\r\n}\r\n\r\nEditInitiative.propTypes = {\r\n  onCancel: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default EditInitiative;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditInitiative from './EditInitiative';\r\nimport ViewInitiative from './ViewInitiative';\r\n\r\nfunction Initiative({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n  function save(initiative) {\r\n    updateCharacter({ initiative });\r\n  }\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditInitiative\r\n        onCancel={() => setEditMode(false)}\r\n        onSave={save}\r\n        character={character}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewInitiative\r\n        character={character}\r\n      />\r\n    </EditButton>\r\n  );\r\n}\r\n\r\nInitiative.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Initiative;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactNumberFormat from 'react-number-format';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  Grid,\r\n  Button,\r\n} from '@material-ui/core';\r\nimport {\r\n  RadioButtonChecked,\r\n  RadioButtonUnchecked,\r\n} from '@material-ui/icons';\r\nimport getNumericPrefix from '../../utils/getNumericPrefix';\r\nimport useNotes from '../../hooks/useNotes';\r\nimport getTotalModifier from '../../utils/getTotalModifier';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  checkbox: {\r\n    padding: 0,\r\n  },\r\n}));\r\n\r\nfunction ViewProficiency({\r\n  proficiency,\r\n  onSave,\r\n  character,\r\n}) {\r\n  const {\r\n    bonusModifier,\r\n    name,\r\n    notes,\r\n    proficient,\r\n    type,\r\n  } = proficiency;\r\n  const modifier = getTotalModifier(character, type, proficient, bonusModifier);\r\n  const classes = useStyles();\r\n  const [saving, setSaving] = useState(false);\r\n  const [ref, openNotes, notesComponent] = useNotes(notes);\r\n  const displayName = notes\r\n    ? `${name}*`\r\n    : name;\r\n\r\n    useEffect(() => {\r\n      setSaving(false);\r\n    }, [proficient]);\r\n\r\n  function handleClick() {\r\n    setSaving(true);\r\n    onSave({ ...proficiency, proficient: !proficient });\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={1} wrap=\"nowrap\" alignItems=\"center\" ref={ref}>\r\n      <Grid item>\r\n        <Checkbox\r\n          checkedIcon={<RadioButtonChecked />}\r\n          checked={proficient}\r\n          className={classes.checkbox}\r\n          disabled={saving}\r\n          icon={<RadioButtonUnchecked />}\r\n          onClick={handleClick}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <Box\r\n          bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n          border={1}\r\n          borderRadius={4}\r\n          component={ReactNumberFormat}\r\n          p={.5}\r\n          px={.75}\r\n          prefix={getNumericPrefix(modifier)}\r\n          value={modifier}\r\n          width={1}\r\n          disabled\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Button onClick={openNotes} size=\"small\">{displayName}</Button>\r\n      </Grid>\r\n      {notesComponent}\r\n    </Grid>\r\n  )\r\n}\r\n\r\nViewProficiency.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n  proficiency: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default ViewProficiency;\r\n","const proficiencyForm = [\r\n  {\r\n    accessor: 'name',\r\n    required: true,\r\n  }, {\r\n    accessor: 'type',\r\n    required: true,\r\n    type: 'select',\r\n    options: [\r\n      { label: 'Strength', value: 'str' },\r\n      { label: 'Dexterity', value: 'dex' },\r\n      { label: 'Constitution', value: 'con' },\r\n      { label: 'Intelligence', value: 'int' },\r\n      { label: 'Wisdom', value: 'wis' },\r\n      { label: 'Charisma', value: 'cha' },\r\n    ],\r\n  }, {\r\n    accessor: 'proficient',\r\n    type: 'checkbox',\r\n    defaultValue: false,\r\n  }, {\r\n    accessor: 'bonusModifier',\r\n    type: 'number',\r\n    defaultValue: 0,          \r\n  }, {\r\n    accessor: 'notes',\r\n    type: 'multiline',\r\n  }\r\n];\r\n\r\nexport default proficiencyForm\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _noop from 'lodash/noop';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport ViewProficiency from './ViewProficiency';\r\nimport proficiencyForm from './proficiencyForm';\r\n\r\nfunction EditProficiency({\r\n  character,\r\n  onCancel,\r\n  onDelete,\r\n  onSave,\r\n  proficiency,\r\n}) {\r\n  return (\r\n    <EditContainer\r\n      onCancel={onCancel}\r\n      onDelete={onDelete}\r\n      onSave={onSave}\r\n      Preview={({ newVal }) => (\r\n        <ViewProficiency\r\n          character={character}\r\n          proficiency={newVal}\r\n        />\r\n      )}\r\n      form={proficiencyForm}\r\n      value={proficiency}\r\n    />\r\n  )\r\n}\r\n\r\nEditProficiency.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  onCancel: PropTypes.func.isRequired,\r\n  onDelete: PropTypes.func,\r\n  onSave: PropTypes.func.isRequired,\r\n  proficiency: PropTypes.shape().isRequired,\r\n};\r\n\r\nEditProficiency.propTypes = {\r\n  onDelete: _noop,\r\n};\r\n\r\nexport default EditProficiency;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _noop from 'lodash/noop';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditProficiency from './EditProficiency';\r\nimport ViewProficiency from './ViewProficiency';\r\n\r\nfunction Proficiency({\r\n  proficiency,\r\n  character,\r\n  onDelete,\r\n  onSave,\r\n}) {\r\n  const { name } = proficiency;\r\n  const [editMode, setEditMode] = useState(!name);\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditProficiency\r\n        proficiency={proficiency}\r\n        character={character}\r\n        onCancel={name ? () => setEditMode(false) : onDelete}\r\n        onDelete={onDelete}\r\n        onSave={onSave}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewProficiency proficiency={proficiency} character={character} onSave={onSave} />\r\n    </EditButton>\r\n  )\r\n}\r\n\r\nProficiency.propTypes = {\r\n  Proficiency: PropTypes.shape().isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n  onDelete: PropTypes.func,\r\n  onSave: PropTypes.func.isRequired,\r\n};\r\n\r\nProficiency.propTypes = {\r\n  onDelete: _noop,\r\n};\r\n\r\nexport default Proficiency;\r\n","import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _cloneDeep from 'lodash/cloneDeep';\r\nimport _filter from 'lodash/filter';\r\nimport _last from 'lodash/last';\r\nimport _map from 'lodash/map';\r\nimport _noop from 'lodash/noop';\r\nimport If from '../../utils/If';\r\nimport AddButton from '../../Form/AddButton';\r\nimport Proficiency from './Proficiency';\r\n\r\nfunction Proficiencies({\r\n  fixedList,\r\n  category,\r\n  character,\r\n  onDelete,\r\n  updateCharacter,\r\n}) {\r\n  const [proficiencies, setProficiencies] = useState(character[category]);\r\n\r\n  useEffect(() => {\r\n    setProficiencies(character[category]);\r\n  }, [character, category]);\r\n\r\n  function save(index, updatedProficiency) {\r\n    const updatedProficiencies = _cloneDeep(proficiencies);\r\n\r\n    updatedProficiencies[index] = updatedProficiency;\r\n\r\n    updateCharacter({ [category]: updatedProficiencies });\r\n  }\r\n\r\n  function deleteFunc(index) {\r\n    if (fixedList) {\r\n      return _noop;\r\n    }\r\n\r\n    return () => {\r\n      if (character[category][index] === undefined) {\r\n        setProficiencies(character[category]);\r\n\r\n        return;\r\n      }\r\n\r\n      const updatedProficiencies = _filter(proficiencies, (p, i) => i !== index);\r\n\r\n      updateCharacter({ [category]: updatedProficiencies });\r\n    };\r\n  }\r\n\r\n  function addItem() {\r\n    const newProficiency = {\r\n      bonusModifier: 0,\r\n      name: '',\r\n      notes: '',\r\n      proficient: false,\r\n      type: '',\r\n    };\r\n\r\n    setProficiencies([...proficiencies, newProficiency]);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {_map(proficiencies, (proficiency, i) => (\r\n        <Proficiency\r\n          key={proficiency.name}\r\n          character={character}\r\n          proficiency={proficiency}\r\n          onDelete={deleteFunc(i)}\r\n          onSave={(updatedProficiency) => save(i, updatedProficiency)}\r\n        />\r\n      ))}\r\n      <If conditions={[!fixedList]}>\r\n        <AddButton\r\n          onAdd={addItem}\r\n          BoxProps={{ width: 1, mt: 2 }}\r\n          disabled={!_last(proficiencies).name}\r\n        />\r\n      </If>\r\n    </>\r\n  );\r\n}\r\n\r\nProficiencies.propTypes = {\r\n  fixedList: PropTypes.bool,\r\n  category: PropTypes.string.isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nProficiencies.defaultProps = {\r\n  fixedList: false,\r\n};\r\n\r\nexport default Proficiencies;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport _reduce from 'lodash/reduce';\r\nimport { Simple } from '../../Displays';\r\n\r\nfunction calculateSpeed({ speed, ...character }) {\r\n  const { base, modifiers } = speed;\r\n  const bonusModifiers = _reduce(modifiers, (res, { active, value }) => (active ? res + value : res), 0)\r\n\r\n  return base + bonusModifiers;\r\n}\r\n\r\nfunction ViewSpeed({\r\n  character,\r\n}) {\r\n  const { speed } = character;\r\n  const { notes } = speed;\r\n  const totalSpeed = calculateSpeed(character);\r\n\r\n  return (\r\n    <Simple label=\"Speed\" notes={notes}>\r\n      <Box p={1} align=\"center\" component={Typography}>\r\n        {totalSpeed}\r\n      </Box>\r\n    </Simple>\r\n  )\r\n}\r\n\r\nViewSpeed.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default ViewSpeed;\r\n","const speedForm = [\r\n  { accessor: 'base', label: 'Base Speed', type: 'number', required: true },\r\n  { accessor: 'divider1', type: 'divider' },\r\n  { accessor: 'modifiers', type: 'modifiers', title: 'Feats/Spells/Etc.', defaultValue: [], },\r\n  { accessor: 'divider2', type: 'divider' },\r\n  { accessor: 'notes', type: 'multiline' },\r\n];\r\n\r\nexport default speedForm;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditContainer from '../../Form/EditContainer';\r\nimport ViewSpeed from './ViewSpeed';\r\nimport speedForm from './speedForm';\r\n\r\nfunction EditSpeed({\r\n  onCancel,\r\n  onSave,\r\n  character,\r\n}) {\r\n  return (\r\n    <EditContainer\r\n      bgcolor=\"background.paper\"\r\n      form={speedForm}\r\n      Preview={({ newVal }) => <ViewSpeed character={{ ...character, speed: newVal }} />}\r\n      onCancel={onCancel}\r\n      onSave={onSave}\r\n      value={character.speed}\r\n      width={320}\r\n    />\r\n  )\r\n}\r\n\r\nEditSpeed.propTypes = {\r\n  onCancel: PropTypes.func.isRequired,\r\n  onSave: PropTypes.func.isRequired,\r\n  character: PropTypes.shape().isRequired,\r\n};\r\n\r\nexport default EditSpeed;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport EditButton from '../../Form/EditButton';\r\nimport EditSpeed from './EditSpeed';\r\nimport ViewSpeed from './ViewSpeed';\r\n\r\nfunction Speed({\r\n  character,\r\n  updateCharacter,\r\n}) {\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n  function save(speed) {\r\n    updateCharacter({ speed });\r\n  }\r\n\r\n  if (editMode) {\r\n    return (\r\n      <EditSpeed\r\n        onCancel={() => setEditMode(false)}\r\n        onSave={save}\r\n        character={character}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EditButton onClick={() => setEditMode(true)}>\r\n      <ViewSpeed\r\n        character={character}\r\n      />\r\n    </EditButton>\r\n  );\r\n}\r\n\r\nSpeed.propTypes = {\r\n  character: PropTypes.shape().isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Speed;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Box } from '@material-ui/core';\r\nimport EditContainer from './EditContainer';\r\nimport Markdown from './Markdown';\r\n\r\nfunction MarkdownInput({\r\n  onCancel,\r\n  onSave,\r\n  value,\r\n}) {\r\n\r\n  return (\r\n    <EditContainer\r\n      form={[{\r\n        accessor: 'text',\r\n        defaultValue: 'This is a link to [google](https://google.com)',\r\n        type: 'multiline',\r\n      }]}\r\n      Preview={({ newVal }) => (\r\n        <Box p={2}>\r\n          <Markdown text={newVal || 'This is a link to [google](https://google.com)'} />\r\n        </Box>\r\n      )}\r\n      onCancel={onCancel}\r\n      onSave={onSave}\r\n      value={{ text: value}}\r\n    />\r\n  );\r\n}\r\n\r\nMarkdownInput.propTypes = {\r\n  onCancel: PropTypes.func,\r\n  onSave: PropTypes.func.isRequired,\r\n  value: PropTypes.string.isRequired,\r\n};\r\n\r\nMarkdownInput.defaultProps = {\r\n  onCancel: null,\r\n};\r\n\r\nexport default MarkdownInput\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport EditButton from '../Form/EditButton';\r\nimport Markdown from '../Form/Markdown';\r\nimport MarkdownInput from '../Form/MarkdownInput';\r\n\r\nfunction TextSection({\r\n  accessor,\r\n  label,\r\n  updateCharacter,\r\n  value,\r\n}) {\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n  const save = useCallback(({ text }) => {\r\n    updateCharacter({ [accessor]: text })\r\n  }, [accessor, updateCharacter]);\r\n\r\n  const content = useMemo(() => (\r\n    editMode\r\n      ? <MarkdownInput\r\n          onSave={save}\r\n          onCancel={() => setEditMode(false)}\r\n          value={value}\r\n        />\r\n      : <EditButton onClick={() => setEditMode(true)}>\r\n          <Box\r\n            borderRadius={4}\r\n            p={2}\r\n          >\r\n            <Markdown text={value || 'Nothing here yet...'} />\r\n          </Box>\r\n        </EditButton>\r\n  ), [editMode, save, value])\r\n\r\n  useEffect(() => {\r\n    setEditMode(false);\r\n  }, [value])\r\n\r\n  return (\r\n    <Box\r\n      bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n      border={1}\r\n      borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n      borderRadius={4}\r\n    >\r\n      <Box bgcolor=\"background.paper\" borderRadius=\"4px 4px 0 0\">\r\n        {content}\r\n      </Box>\r\n\r\n      <Box borderColor=\"rgba(0, 0, 0, 0.42)\" borderTop={1} p={2}>\r\n        <Typography align=\"center\" variant=\"h6\">{label}</Typography>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nTextSection.propTypes = {\r\n  accessor: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  updateCharacter: PropTypes.func.isRequired,\r\n  value: PropTypes.string,\r\n};\r\n\r\nTextSection.defaultProps = {\r\n  value: '',\r\n}\r\n\r\nexport default TextSection;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport useCharacter from '../hooks/useCharacter';\r\nimport SaveableInput from '../Form/SaveableInput';\r\nimport HorizontalInput from '../Form/HorizontalInput';\r\nimport ArmorClass from './ArmorClass';\r\nimport Attacks from './Attacks';\r\nimport Attributes from './Attributes';\r\nimport DeathSaves from './DeathSaves';\r\nimport Equipment from './Equipment';\r\nimport Features from './Features';\r\nimport Health from './Health';\r\nimport Initiative from './Initiative'\r\nimport Proficiencies from './Proficiencies';\r\nimport Speed from './Speed';\r\nimport TextSection from './TextSection';\r\n\r\nfunction CharacterSheet({ id }) {\r\n  const [character, updateCharacter] = useCharacter(id);\r\n\r\n  if (!character.id) {\r\n    return 'loading...';\r\n  }\r\n\r\n  return (\r\n    <Paper component=\"form\">\r\n      <Box p={2}>\r\n        TODO:\r\n        <ul>\r\n          <li>[x] finish initial form</li>\r\n          <li>[x] make re-useable markdown editor</li>\r\n          <li>[x] update death saves</li>\r\n          <li>[x] update attacks</li>\r\n          <li>[x] update currency</li>\r\n          <li>[x] update equipment</li>\r\n          <li>[x] update skills (need notes)</li>\r\n          <li>[x] update languages and other proficiencies</li>\r\n          <li>[x] verify everything has notes</li>\r\n          <li>[x] make the 'updateCharacter' function do as intended</li>\r\n          <li>[x] update the route to group the websockets by character</li>\r\n          <li>[x] create the db info needed</li>\r\n          <li>[x] add smash character info into db</li>\r\n          <li>[x] get the graphql is working</li>\r\n          <li>[x] make the update call work for header</li>\r\n          <li>[x] make the update call work for attributes</li>\r\n          <li>[x] make the update call work for saving throws and skills</li>\r\n          <li>[x] make the update call work for saving languages and proficiencies</li>\r\n          <li>[x] make the update call work for saving personality</li>\r\n          <li>[x] make the update call work for saving attacks</li>\r\n          <li>[x] make the update call work for saving equipment</li>\r\n          <li>[x] make the update call work for saving features and traits</li>\r\n          <li>[x] make the update call work for saving health stuff</li>\r\n          <li>[] create markdown helper</li>\r\n        </ul>\r\n      </Box>\r\n\r\n      <Box p={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <Grid container spacing={2} alignItems=\"center\">\r\n              <Grid item xs={12} sm={6}>\r\n                <SaveableInput\r\n                  value={character.name}\r\n                  label=\"Character Name\"\r\n                  onSave={(name) => updateCharacter({ name })}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <Grid container spacing={1}>\r\n                  <Grid item xs={12} sm={4}>\r\n                    <SaveableInput\r\n                      onSave={(className) => updateCharacter({ className })}\r\n                      value={character.className}\r\n                      label=\"Class\"\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={4}>\r\n                    <SaveableInput\r\n                      value={character.level}\r\n                      label=\"Level\"\r\n                      onSave={level => updateCharacter({ level })}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={4}>\r\n                    <SaveableInput\r\n                      value={character.background}\r\n                      label=\"Background\"\r\n                      onSave={background => updateCharacter({ background })}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={4}>\r\n                    <SaveableInput\r\n                      value={character.race}\r\n                      label=\"Race\"\r\n                      onSave={race => updateCharacter({ race })}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={4}>\r\n                    <SaveableInput\r\n                      value={character.alignment}\r\n                      label=\"Alignment\"\r\n                      onSave={alignment => updateCharacter({ alignment })}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={4}>\r\n                    <SaveableInput\r\n                      value={character.xp}\r\n                      label=\"Experience Points\"\r\n                      onSave={xp => updateCharacter({ xp })}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} sm={5}>\r\n                <Attributes\r\n                  character={character}\r\n                  updateCharacter={updateCharacter}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item xs={12} sm={7}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <HorizontalInput\r\n                      value={character.inspiration}\r\n                      label=\"Inspiration\"\r\n                      onSave={inspiration => updateCharacter({ inspiration })}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <HorizontalInput\r\n                      value={character.proficiencyBonus}\r\n                      label=\"Proficiency Bonus\"\r\n                      onSave={proficiencyBonus => updateCharacter({\r\n                        proficiencyBonus: parseInt(proficiencyBonus, 10),\r\n                      })}\r\n                      type=\"number\"\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <Box border={1} borderColor=\"rgba(0, 0, 0, 0.42)\" borderRadius={4}>\r\n                      <Box p={1.5}>\r\n                        <Proficiencies\r\n                          fixedList\r\n                          category=\"savingThrows\"\r\n                          character={character}\r\n                          updateCharacter={updateCharacter}\r\n                        />\r\n                      </Box>\r\n                      <Box\r\n                        p={1}\r\n                        bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n                        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n                        borderRadius=\"0 0 4px 4px\"\r\n                        borderTop={1}\r\n                      >\r\n                        <Typography variant=\"h6\" align=\"center\">Saving Throws</Typography>\r\n                      </Box>\r\n                    </Box>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <Box border={1} borderColor=\"rgba(0, 0, 0, 0.42)\" borderRadius={4}>\r\n                      <Box p={1.5}>\r\n                        <Proficiencies\r\n                          category=\"skills\"\r\n                          character={character}\r\n                          updateCharacter={updateCharacter}\r\n                        />\r\n                      </Box>\r\n                      <Box\r\n                        p={1}\r\n                        bgcolor=\"rgba(0, 0, 0, 0.09)\"\r\n                        borderColor=\"rgba(0, 0, 0, 0.42)\"\r\n                        borderRadius=\"0 0 4px 4px\"\r\n                        borderTop={1}\r\n                      >\r\n                        <Typography variant=\"h6\" align=\"center\">Skills</Typography>\r\n                      </Box>\r\n                    </Box>\r\n                  </Grid>\r\n\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <TextSection\r\n                  accessor=\"languagesAndProficiencies\"\r\n                  label=\"Languages And Proficiencies\"\r\n                  updateCharacter={updateCharacter}\r\n                  value={character.languagesAndProficiencies}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} sm={4}>\r\n                <ArmorClass character={character} updateCharacter={updateCharacter} />\r\n              </Grid>\r\n              <Grid item xs={12} sm={4}>\r\n                <Initiative character={character} updateCharacter={updateCharacter} />\r\n              </Grid>\r\n              <Grid item xs={12} sm={4}>\r\n                <Speed character={character} updateCharacter={updateCharacter} />\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Grid container spacing={1}>\r\n                  <Grid item xs={12} md={6}>\r\n                    <Health\r\n                      character={character}\r\n                      updateCharacter={updateCharacter}\r\n                    />\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12} md={6}>\r\n                    <Grid container spacing={1}>\r\n                      <Grid item xs={12}>\r\n                        <HorizontalInput\r\n                          value={character.health.maxHp}\r\n                          label=\"Max HP\"\r\n                          onSave={maxHp => updateCharacter({ health: { ...character.health, maxHp } })}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <HorizontalInput\r\n                          value={character.health.tempHp}\r\n                          label=\"Temp HP\"\r\n                          onSave={tempHp => updateCharacter({ health: { ...character.health, tempHp } })}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <HorizontalInput\r\n                          value={character.health.totalHitDice}\r\n                          label=\"Total Hit Die\"\r\n                          onSave={totalHitDice => updateCharacter({ health: { ...character.health, totalHitDice } })}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <HorizontalInput\r\n                          value={character.health.hitDice}\r\n                          label=\"Hit Die\"\r\n                          onSave={hitDice => updateCharacter({ health: { ...character.health, hitDice } })}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <DeathSaves character={character} updateCharacter={updateCharacter} />\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Attacks\r\n                  character={character}\r\n                  updateCharacter={updateCharacter}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Equipment\r\n                  character={character}\r\n                  updateCharacter={updateCharacter}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} md={4}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12}>\r\n                <TextSection\r\n                  accessor=\"personality\"\r\n                  label=\"Personality\"\r\n                  updateCharacter={updateCharacter}\r\n                  value={character.personality}\r\n                />\r\n              </Grid>\r\n\r\n              <Grid item xs={12}>\r\n                <Features\r\n                  features={character.features}\r\n                  updateCharacter={updateCharacter}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nCharacterSheet.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default CharacterSheet;\r\n","import { useReducer } from 'react';\r\nimport _cloneDeep from 'lodash/cloneDeep';\r\nimport _filter from 'lodash/filter';\r\nimport _findIndex from 'lodash/findIndex';\r\n\r\nexport const SET_SIZE = 'GAME_BOARD::SET_SIZE';\r\nexport const SET_OFFSET = 'GAME_BOARD::SET_OFFSET';\r\nexport const SET_SCALE = 'GAME_BOARD::SET_SCALE';\r\nexport const ADD_CHARACTER = 'GAME_BOARD::ADD_CHARACTER';\r\nexport const REMOVE_CHARACTER = 'GAME_BOARD::REMOVE_CHARACTER';\r\nexport const MOVE_CHARACTER = 'GAME_BOARD::MOVE_CHARACTER';\r\n\r\nconst initialState = {\r\n\tsize: [0, 0],\r\n\toffset: [0, 0],\r\n\tcharacters: [],\r\n\tscale: 50,\r\n}\r\n\r\nfunction reducer(state, action) {\r\n\tswitch (action.type) {\r\n\t\tcase SET_SIZE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsize: action.payload,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_OFFSET: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffset: action.payload,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_SCALE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tscale: action.payload\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase ADD_CHARACTER: {\r\n\t\t\tconst characters = [...state.characters, action.payload];\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcharacters\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase REMOVE_CHARACTER: {\r\n\t\t\tconst updatedCharacters = _filter(state.characters, ({ name }) => name !== action.payload);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcharacters: updatedCharacters,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase MOVE_CHARACTER: {\r\n\t\t\tconst { x, y, name } = action.payload;\r\n\t\t\tconst { characters } = state;\r\n\t\t\tconst charToMoveIndex = _findIndex(state.characters, { name });\r\n\t\t\tconst updatedChar = {\r\n\t\t\t\t...characters[charToMoveIndex],\r\n\t\t\t\tx,\r\n\t\t\t\ty,\r\n\t\t\t};\r\n\t\t\tconst updatedCharacters = _cloneDeep(characters);\r\n\r\n\t\t\tupdatedCharacters[charToMoveIndex] = updatedChar;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcharacters: updatedCharacters,\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction useGameBoard() {\r\n\tconst [ state, dispatch ] = useReducer(reducer, initialState);\r\n\r\n\treturn {\r\n\t\tstate,\r\n\t\tdispatch,\r\n\t};\r\n}\r\n\r\nexport default useGameBoard\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport _find from 'lodash/find';\r\nimport { MOVE_CHARACTER } from './hooks/useGameBoard';\r\n\r\nconst styles = theme => ({\r\n\tcharacter: {\r\n\t\tposition: 'absolute',\r\n\t\tzIndex: 103,\r\n\t\tborderRadius: '50%',\r\n\t}\r\n})\r\n\r\nfunction CharacterIcon({\r\n\tboard,\r\n\tclasses,\r\n\tcharacter,\r\n\tdispatch\r\n}) {\r\n\tconst { x, y, background, name } = character;\r\n\tconst { topOffset, leftOffset, scale, offset } = board;\r\n\tconst [ xOffset, yOffset ] = offset;\r\n\tconst [ top, setTop ] = useState(y * scale);\r\n\tconst [ left, setLeft ] = useState(x * scale);\r\n\tconst activeTouch = useRef({});\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTop(y * scale);\r\n\t\tsetLeft(x * scale);\r\n\t}, [ character, scale, x, y ]);\r\n\r\n\tfunction stopMoving({ clientX, clientY }) {\r\n\t\twindow.removeEventListener('mousemove', move);\r\n\t\twindow.removeEventListener('mouseup', stopMoving);\r\n\r\n\t\tconst curY = clientY - topOffset - yOffset - (scale / 2);\r\n\t\tconst curX = clientX - leftOffset - xOffset - (scale / 2);\r\n\t\tconst newY = Math.round(curY / scale);\r\n\t\tconst newX = Math.round(curX / scale);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: MOVE_CHARACTER,\r\n\t\t\tpayload: {\r\n\t\t\t\tname,\r\n\t\t\t\tx: newX,\r\n\t\t\t\ty: newY,\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tfunction move({ clientX, clientY }) {\r\n\t\tsetLeft(clientX - leftOffset - xOffset - (scale / 2));\r\n\t\tsetTop(clientY - topOffset - yOffset - (scale / 2));\r\n\t}\r\n\r\n\tfunction startMoving(evt) {\r\n\t\tevt.stopPropagation();\r\n\r\n\t\twindow.addEventListener('mousemove', move);\r\n\t\twindow.addEventListener('mouseup', stopMoving);\r\n\t}\r\n\r\n\tfunction moveTouch(evt) {;\r\n\t\tevt.preventDefault();\r\n\r\n\r\n\t\tconst { changedTouches } = evt;\r\n\t\tconst touch = _find(changedTouches, { identifier: activeTouch.current.id });\r\n\r\n\t\tif (!touch) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconst { clientX, clientY } = touch;\r\n\r\n\t\tsetLeft(clientX - leftOffset - xOffset - (scale / 2));\r\n\t\tsetTop(clientY - topOffset - yOffset - (scale / 2));\r\n\t}\r\n\r\n\tfunction stopMovingTouch({ changedTouches }) {\r\n\t\tconst touch = _find(changedTouches, { identifier: activeTouch.current.id });\r\n\r\n\t\tif (!touch) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\twindow.removeEventListener('touchmove', moveTouch);\r\n\t\twindow.removeEventListener('touchend', stopMovingTouch);\r\n\t\twindow.removeEventListener('touchcancel', stopMovingTouch);\r\n\r\n\t\tconst { clientX, clientY } = touch;\r\n\t\tconst curY = clientY - topOffset - yOffset - (scale / 2);\r\n\t\tconst curX = clientX - leftOffset - xOffset - (scale / 2);\r\n\t\tconst newY = Math.round(curY / scale);\r\n\t\tconst newX = Math.round(curX / scale);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: MOVE_CHARACTER,\r\n\t\t\tpayload: {\r\n\t\t\t\tname,\r\n\t\t\t\tx: newX,\r\n\t\t\t\ty: newY,\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tactiveTouch.current.id = null;\r\n\t}\r\n\r\n\tfunction startMovingTouch(evt) {\r\n\t\tevt.stopPropagation();\r\n\t\tactiveTouch.current.id = evt.changedTouches[0].identifier;\r\n\r\n\t\twindow.addEventListener('touchmove', moveTouch, { passive: false });\r\n\t\twindow.addEventListener('touchend', stopMovingTouch);\r\n\t\twindow.addEventListener('touchcancel', stopMovingTouch);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classes.character}\r\n\t\t\tstyle={{\r\n\t\t\t\ttop: top + yOffset,\r\n\t\t\t\tleft: left + xOffset,\r\n\t\t\t\tbackground,\r\n\t\t\t\theight: scale,\r\n\t\t\t\twidth: scale,\r\n\t\t\t}}\r\n\t\t\tonMouseDown={startMoving}\r\n\t\t\tonTouchStart={startMovingTouch}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default withStyles(styles)(CharacterIcon);\r\n","import React, { useCallback, useEffect, useRef } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport _map from 'lodash/map';\r\nimport _times from 'lodash/times';\r\nimport _find from 'lodash/find';\r\nimport CharacterIcon from './CharacterIcon';\r\nimport { SET_SIZE, SET_SCALE, SET_OFFSET } from './hooks/useGameBoard';\r\n\r\nfunction drawGrid(canvasClass, scale, offset) {\r\n\tconst canvas = document.querySelector(`.${canvasClass}`);\r\n\tconst width = canvas.width;\r\n\tconst height = canvas.height;\r\n\tconst [ xOffset, yOffset ] = offset;\r\n\tconst ctx = canvas.getContext('2d');\r\n\r\n\tctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\tctx.lineWidth = 1;\r\n\tctx.strokeStyle = '#aaa';\r\n\tctx.beginPath();\r\n\tctx.moveTo(0, 0);\r\n\tctx.lineTo(0, height);\r\n\tctx.stroke();\r\n\r\n\tctx.moveTo(width, 0);\r\n\tctx.lineTo(width, height);\r\n\tctx.stroke();\r\n\r\n\tctx.moveTo(0, height);\r\n\tctx.lineTo(width, height);\r\n\tctx.stroke();\r\n\r\n\tconst numOfHorizontalLines = Math.ceil( height / scale );\r\n\tconst numOfVerticalLines = Math.ceil( width / scale );\r\n\tconst xGridOffset = xOffset % scale;\r\n\tconst yGridOffset = yOffset % scale;\r\n\r\n\t_times(numOfHorizontalLines + 1, (i) => {\r\n\t\tctx.moveTo(0, ((i * scale) + yGridOffset));\r\n\t\tctx.lineTo(width, ((i * scale) + yGridOffset));\r\n\t\tctx.stroke();\r\n\t});\r\n\r\n\t_times(numOfVerticalLines + 1, (i) => {\r\n\t\tctx.moveTo(((i * scale) + xGridOffset), 0);\r\n\t\tctx.lineTo(((i * scale) + xGridOffset), height);\r\n\t\tctx.stroke();\r\n\t});\r\n}\r\n\r\n// function drawLine(canvasClass, scale) {\r\n// }\r\n\r\nconst styles = theme => ({\r\n\tcanvas: {\r\n\t\tbackgroundColor: '#f0f0f0',\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tzIndex: 1,\r\n\t},\r\n\tboardWrapper: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 56,\r\n\t\tleft: 0,\r\n\t\tright: 0,\r\n\t\tbottom: 0,\r\n\t}\r\n})\r\n\r\nfunction GameBoard({\r\n\tclasses,\r\n\tgameBoard\r\n}) {\r\n\tconst boardWrapper = document.querySelector(`.${classes.boardWrapper}`);\r\n\tconst { state, dispatch } = gameBoard;\r\n\tconst { characters, size, offset, scale } = state;\r\n\tconst [ width, height ] = size;\r\n\tconst [ xOffset, yOffset ] = offset;\r\n\tconst activeTouch = useRef({});\r\n\tconst resize = useCallback(() => dispatch({\r\n\t\ttype: SET_SIZE,\r\n\t\tpayload: [\r\n\t\t\twindow.outerWidth,\r\n\t\t\twindow.outerHeight,\r\n\t\t]\r\n\t}), [dispatch]);\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('resize', resize);\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', resize);\r\n\t\t}\r\n\t}, [dispatch, resize]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch({\r\n\t\t\ttype: SET_SIZE,\r\n\t\t\tpayload: [\r\n\t\t\t\twindow.outerWidth,\r\n\t\t\t\twindow.outerHeight,\r\n\t\t\t]\r\n\t\t})\r\n\t}, [dispatch])\r\n\r\n\tuseEffect(() => {\r\n\t\tdrawGrid(classes.canvas, scale, offset);\r\n\t}, [scale, classes, height, width, offset]);\r\n\r\n\tfunction moveBoard(evt) {\r\n\t\tconst { clientX, clientY } = evt;\r\n\t\tconst [ startX, startY ] = activeTouch.current.start;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: SET_OFFSET,\r\n\t\t\tpayload: [\r\n\t\t\t\txOffset + (clientX - startX),\r\n\t\t\t\tyOffset + (clientY - startY),\r\n\t\t\t]\r\n\t\t});\r\n\t}\r\n\r\n\tfunction startMovingBoard(evt) {\r\n\t\tconst { clientX, clientY } = evt;\r\n\t\tactiveTouch.current.start = [ clientX, clientY ];\r\n\r\n\r\n\t\twindow.addEventListener('mousemove', moveBoard);\r\n\t\twindow.addEventListener('mouseup', stopMoving);\r\n\t}\r\n\r\n\tfunction stopMoving() {\r\n\t\twindow.removeEventListener('mousemove', moveBoard);\r\n\t\twindow.removeEventListener('mouseup', stopMoving);\r\n\t\twindow.removeEventListener('mousedown', stopMoving);\r\n\t}\r\n\r\n\tfunction moveBoardTouch(evt) {\r\n\t\tevt.preventDefault();\r\n\r\n\t\tconst { changedTouches } = evt;\r\n\t\tconst touch = _find(changedTouches, { identifier: activeTouch.current.id });\r\n\r\n\t\tif (!touch) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { clientX, clientY } = touch;\r\n\t\tconst [ startX, startY ] = activeTouch.current.start;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: SET_OFFSET,\r\n\t\t\tpayload: [\r\n\t\t\t\txOffset + (clientX - startX),\r\n\t\t\t\tyOffset + (clientY - startY),\r\n\t\t\t]\r\n\t\t});\r\n\t}\r\n\r\n\tfunction stopMovingTouch() {\r\n\t\twindow.removeEventListener('touchmove', moveBoardTouch);\r\n\t\twindow.removeEventListener('touchend', stopMovingTouch);\r\n\t\twindow.removeEventListener('touchcancel', stopMovingTouch);\r\n\t}\r\n\r\n\tfunction startMovingBoardTouch(evt) {\r\n\t\tconst { clientX, clientY, identifier } = evt.changedTouches[0];\r\n\t\tactiveTouch.current.id = identifier;\r\n\t\tactiveTouch.current.start = [ clientX, clientY ];\r\n\r\n\t\twindow.addEventListener('touchmove', moveBoardTouch, { passive: false });\r\n\t\twindow.addEventListener('touchend', stopMovingTouch);\r\n\t\twindow.addEventListener('touchcancel', stopMovingTouch);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={classes.boardWrapper}\r\n\t\t\tonMouseDown={startMovingBoard}\r\n\t\t\tonTouchStart={startMovingBoardTouch}\r\n\t\t>\r\n\t\t\t\t<canvas\r\n\t\t\t\t\tclassName={classes.canvas}\r\n\t\t\t\t\twidth={width}\r\n\t\t\t\t\theight={height}\r\n\t\t\t\t>\r\n\t\t\t\t<p>Browser Unsupported</p>\r\n\t\t\t</canvas>\r\n\t\t\t<button style={{ bottom: 32, right: 32, zIndex: 2, position: 'absolute'}} onClick={() => dispatch({ type: SET_SCALE, payload: scale - 5 })}>Zoom Out</button>\r\n\t\t\t<button style={{ bottom: 32, right: 116, zIndex: 2, position: 'absolute'}} onClick={() => dispatch({ type: SET_SCALE, payload: scale + 5 })}>Zoom In</button>\r\n\t\t\t{\r\n\t\t\t\t_map(characters, character => (\r\n\t\t\t\t\t<CharacterIcon\r\n\t\t\t\t\t\tkey={character.name}\r\n\t\t\t\t\t\tcharacter={character}\r\n\t\t\t\t\t\tdispatch={dispatch}\r\n\t\t\t\t\t\tboard={{\r\n\t\t\t\t\t\t\tleftOffset: boardWrapper.getBoundingClientRect().left,\r\n\t\t\t\t\t\t\ttopOffset: boardWrapper.getBoundingClientRect().top,\r\n\t\t\t\t\t\t\tscale,\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default withStyles(styles)(GameBoard)\r\n","import React, { useState } from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport _find from 'lodash/find';\r\nimport { ADD_CHARACTER, REMOVE_CHARACTER } from './hooks/useGameBoard';\r\n\r\nfunction PlayerList({\r\n\tgameBoard,\r\n}) {\r\n\tconst { state, dispatch } = gameBoard;\r\n\tconst [ newPlayer, setNewPlayer ] = useState('');\r\n\tconst [ width, height ] = state.size;\r\n\r\n\tfunction addCharacter(character) {\r\n\t\tif (!_find(state.characters, toon => toon.name === character.name)) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ADD_CHARACTER,\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\t...character, \r\n\t\t\t\t\tx: Math.round((width / 50) / 2),\r\n\t\t\t\t\ty: Math.round((height / 50) / 3),\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeCharacter(name) {\r\n\t\tdispatch({ type: REMOVE_CHARACTER, payload: name });\r\n\t}\r\n\r\n\tfunction saveNewCharacter() {\r\n\t\taddCharacter({ name: newPlayer, background: 'blue' });\r\n\r\n\t\tsetNewPlayer('');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Paper>\r\n\t\t\t<List>\r\n\t\t\t\t<ListItem button onClick={() => addCharacter({name: 'Smash', background: 'green' })}>\r\n\t\t\t\t\t<ListItemText primary=\"Smash\" />\r\n\t\t\t\t\t<IconButton onClick={() => removeCharacter('Smash')}>\r\n\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListItem button onClick={() => addCharacter({name: 'Arcanis', background: 'yellow'})}>\r\n\t\t\t\t\t<ListItemText primary=\"Arcanis\" />\r\n\t\t\t\t\t<IconButton onClick={() => removeCharacter('Arcanis')}>\r\n\t\t\t\t\t\t<CancelIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListItem>\r\n\t\t\t\t\t<ListItemText>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tonChange={evt => setNewPlayer(evt.target.value)}\r\n\t\t\t\t\t\t\tvalue={newPlayer}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t\t<IconButton onClick={saveNewCharacter}>\r\n\t\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t</ListItem>\r\n\t\t\t</List>\r\n\t\t</Paper>\r\n\t)\r\n};\r\n\r\nexport default PlayerList;\r\n","import React from 'react';\r\nimport { hot } from 'react-hot-loader/root';\r\nimport { MuiThemeProvider } from '@material-ui/core/styles'\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Header from './Header';\r\nimport CharacterSheet from './CharacterSheet';\r\n// import CanvasMenu from './CanvasMenu';\r\nimport GameBoard from './GameBoard';\r\nimport PlayerList from './PlayerList';\r\nimport theme from './theme';\r\nimport useGameBoard from './hooks/useGameBoard';\r\n\r\nfunction App() {\r\n  const gameBoard = useGameBoard();\r\n\r\n  return (\r\n    <MuiThemeProvider theme={theme}>\r\n      <Header />\r\n      <Box p={4} mt={11} height=\"100%\">\r\n        <GameBoard gameBoard={gameBoard}/>\r\n\r\n        <Box width=\"25%\" position=\"relative\" zIndex=\"1\">\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <PlayerList gameBoard={gameBoard} />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              {/* <CanvasMenu /> */}\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n        <Box position=\"relative\" zIndex=\"1\">\r\n          <CharacterSheet id=\"1\" />\r\n        </Box>\r\n      </Box>\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n\r\nexport default hot(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App.jsx';\r\n// import * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n"],"sourceRoot":""}